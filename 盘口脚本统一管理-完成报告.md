# ğŸ“Š ç›˜å£è„šæœ¬ç»Ÿä¸€ç®¡ç† - å®ŒæˆæŠ¥å‘Š

> **ä»»åŠ¡ç›®æ ‡**ï¼šå‚è€ƒ F5BotV2 å’Œ BaiShengVx3Plusï¼Œè¡¥å……å…¶ä»–ç›˜å£çš„è‡ªåŠ¨æŠ•æ³¨è„šæœ¬ï¼Œç»Ÿä¸€ç›˜å£å†…å®¹ï¼Œç»Ÿä¸€ä¿®æ”¹ä¸€ä»½ä»£ç ï¼Œç»´æŠ¤"é…ç½®ç®¡ç†"å’Œ"å¿«é€Ÿè®¾ç½®"çš„ç›˜å£é€‰é¡¹ã€‚

---

## âœ… å®Œæˆæƒ…å†µæ€»ç»“

### 1. ç›˜å£æšä¸¾å®šä¹‰ âœ…

**ç»Ÿä¸€ä½ç½®**ï¼š
- `BaiShengVx3Plus.Shared/Platform/BetPlatform.cs`
- `zhaocaimao.Shared/Platform/BetPlatform.cs`

**å®šä¹‰çš„19ä¸ªç›˜å£**ï¼š

```csharp
public enum BetPlatform
{
    ä¸ä½¿ç”¨ç›˜å£ = 0,
    å…ƒå®‡å®™2 = 1,
    æµ·å³¡ = 2,
    QT = 3,
    èŒ…å° = 5,
    å¤ªå¹³æ´‹ = 6,
    è“A = 7,
    çº¢æµ· = 8,
    S880 = 9,
    ADK = 10,
    çº¢æµ·æ— å = 11,
    æœç„¶ = 12,
    è“B = 15,
    AC = 16,
    é€šå® = 17,
    é€šå®PC = 18,
    HY168 = 19,
    bingo168 = 20,
    äº‘é¡¶ = 21
}
```

---

### 2. å¹³å°é…ç½®ä¿¡æ¯ âœ…

**ç»Ÿä¸€ç®¡ç†**ï¼š`BetPlatformHelper` ç±»ä¸­çš„ `_platforms` å­—å…¸

```csharp
private static readonly Dictionary<BetPlatform, PlatformInfo> _platforms = new()
{
    {
        BetPlatform.é€šå®, new PlatformInfo
        {
            Platform = BetPlatform.é€šå®,
            DefaultUrl = "https://tbfowenb.fr.cvv66.top/",
            LegacyNames = new[] { "TongBao", "TB" }
        }
    },
    // ... å…¶ä»–18ä¸ªç›˜å£é…ç½®
};
```

**åŒ…å«ä¿¡æ¯**ï¼š
- âœ… é»˜è®¤URL
- âœ… å…¼å®¹æ—§æ•°æ®çš„è‹±æ–‡åï¼ˆLegacyNamesï¼‰

---

### 3. å¹³å°è„šæœ¬å®ç° âœ…

#### **F5BotV2** (åŸå§‹å‚è€ƒé¡¹ç›®)

| ç›˜å£ | è„šæœ¬ç±» | ä½ç½® |
|------|--------|------|
| æµ·å³¡ | `HX666` | F5BotV2/BetSite/yyz168/HX666.cs |
| å…ƒå®‡å®™2 | `YYZ2Member` | F5BotV2/BetSite/yyz168/YYZ2Member.cs |
| èŒ…å° | `Mt168Member` | F5BotV2/BetSite/mt168/Mt168Member.cs |
| å¤ªå¹³æ´‹ | `Mt168Member` (å¤ç”¨) | F5BotV2/BetSite/mt168/Mt168Member.cs |
| è“A | `LanABetSite` | F5BotV2/BetSite/LanABetSite.cs |
| çº¢æµ· | `HongHaiMember` | F5BotV2/BetSite/HongHai/HongHaiMember.cs |
| é€šå® | `TongBaoMember` | F5BotV2/BetSite/HongHai/TongBaoMember.cs |
| é€šå®PC | `TongBaoPcMember` | F5BotV2/BetSite/HongHai/TongBaoPcMember.cs |
| çº¢æµ·æ— å | `HongHaiWuMing` | F5BotV2/BetSite/HongHai/HongHaiWuMing.cs |
| S880 | `S880Member` | F5BotV2/BetSite/S880/S880Member.cs |
| ADK | `ADKMember` | F5BotV2/BetSite/ADKMember.cs |
| QT | `QtBet` | F5BotV2/BetSite/Qt/QtBet.cs |
| è“B | `QtBet` (å¤ç”¨) | F5BotV2/BetSite/Qt/QtBet.cs |
| æœç„¶ | `Kk888Member` | F5BotV2/BetSite/Kk888Member.cs |
| AC | `AcMember` | F5BotV2/BetSite/yyz168/AcMember.cs |
| HY168 | `Hy168bingoMember` | F5BotV2/BetSite/Hy168bingoMember.cs |
| bingo168 | `Hy168bingoMember` (å¤ç”¨) | F5BotV2/BetSite/Hy168bingoMember.cs |
| ä¸ä½¿ç”¨ç›˜å£ | `NoneSite` | F5BotV2/BetSite/yyz168/NoneSite.cs |

**ç®¡ç†å™¨**ï¼š`F5BotV2/BetSite/BetSiteFactory.cs`

---

#### **BsBrowserClient** (BaiShengVx3Plusçš„å¤–éƒ¨æµè§ˆå™¨)

| ç›˜å£ | è„šæœ¬ç±» | ä½ç½® |
|------|--------|------|
| äº‘é¡¶ | `YunDing28Script` | BsBrowserClient/PlatformScripts/YunDing28Script.cs |
| é€šå® | `TongBaoScript` | BsBrowserClient/PlatformScripts/TongBaoScript.cs |
| é€šå®PC | `TongBaoPcScript` | BsBrowserClient/PlatformScripts/TongBaoPcScript.cs |
| æµ·å³¡ | `HaiXiaScript` | BsBrowserClient/PlatformScripts/HaiXiaScript.cs |
| çº¢æµ· | `HongHaiScript` | BsBrowserClient/PlatformScripts/HongHaiScript.cs |
| çº¢æµ·æ— å | `HongHaiWuMingScript` | BsBrowserClient/PlatformScripts/HongHaiWuMingScript.cs |
| èŒ…å° | `Mt168Script` | BsBrowserClient/PlatformScripts/Mt168Script.cs |
| å¤ªå¹³æ´‹ | `Mt168Script` (å¤ç”¨) | BsBrowserClient/PlatformScripts/Mt168Script.cs |
| QT | `QtScript` | BsBrowserClient/PlatformScripts/QtScript.cs |
| è“B | `QtScript` (å¤ç”¨) | BsBrowserClient/PlatformScripts/QtScript.cs |
| S880 | `S880Script` | BsBrowserClient/PlatformScripts/S880Script.cs |
| ADK | `ADKScript` | BsBrowserClient/PlatformScripts/ADKScript.cs |
| æœç„¶ | `Kk888Script` | BsBrowserClient/PlatformScripts/Kk888Script.cs |
| AC | `AcScript` | BsBrowserClient/PlatformScripts/AcScript.cs |
| HY168 | `Hy168bingoScript` | BsBrowserClient/PlatformScripts/Hy168bingoScript.cs |
| bingo168 | `Hy168bingoScript` (å¤ç”¨) | BsBrowserClient/PlatformScripts/Hy168bingoScript.cs |
| è“A | `LanAScript` | BsBrowserClient/PlatformScripts/LanAScript.cs |
| å…ƒå®‡å®™2 | `YYZ2Script` | BsBrowserClient/PlatformScripts/YYZ2Script.cs |
| ä¸ä½¿ç”¨ç›˜å£ | `NoneSiteScript` | BsBrowserClient/PlatformScripts/NoneSiteScript.cs |

**ç®¡ç†å™¨**ï¼š`BsBrowserClient/Form1.cs` çš„ `InitializePlatformScript()` æ–¹æ³•

**æŠ€æœ¯æ ˆ**ï¼šCefSharp.WinForms (å¤–éƒ¨è¿›ç¨‹) + Socket é€šä¿¡

---

#### **zhaocaimao** (ä½¿ç”¨å†…ç½®WebView2)

| ç›˜å£ | è„šæœ¬ç±» | ä½ç½® |
|------|--------|------|
| äº‘é¡¶ | `YunDing28Script` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/YunDing28Script.cs |
| é€šå® | `TongBaoScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/TongBaoScript.cs |
| é€šå®PC | `TongBaoPcScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/TongBaoPcScript.cs |
| æµ·å³¡ | `HaiXiaScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/HaiXiaScript.cs |
| çº¢æµ· | `HongHaiScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/HongHaiScript.cs |
| çº¢æµ·æ— å | `HongHaiWuMingScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/HongHaiWuMingScript.cs |
| èŒ…å° | `Mt168Script` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/Mt168Script.cs |
| å¤ªå¹³æ´‹ | `Mt168Script` (å¤ç”¨) | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/Mt168Script.cs |
| QT | `QtScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/QtScript.cs |
| è“B | `QtScript` (å¤ç”¨) | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/QtScript.cs |
| S880 | `S880Script` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/S880Script.cs |
| ADK | `ADKScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/ADKScript.cs |
| æœç„¶ | `Kk888Script` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/Kk888Script.cs |
| AC | `AcScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/AcScript.cs |
| HY168 | `Hy168bingoScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/Hy168bingoScript.cs |
| bingo168 | `Hy168bingoScript` (å¤ç”¨) | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/Hy168bingoScript.cs |
| è“A | `LanAScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/LanAScript.cs |
| å…ƒå®‡å®™2 | `YYZ2Script` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/YYZ2Script.cs |
| ä¸ä½¿ç”¨ç›˜å£ | `NoneSiteScript` | zhaocaimao/Services/AutoBet/Browser/PlatformScripts/NoneSiteScript.cs |

**ç®¡ç†å™¨**ï¼š`zhaocaimao/Services/AutoBet/Browser/BetBrowserEngine.cs` çš„ `InitializePlatformScript()` æ–¹æ³•

**æŠ€æœ¯æ ˆ**ï¼šWebView2 (è¿›ç¨‹å†…æ§ä»¶) + ç›´æ¥æ‰§è¡ŒJavaScript

---

## ğŸ¯ ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆ

### **å”¯ä¸€æ•°æ®æº (Single Source of Truth)**

```
BetPlatform.cs (å…±äº«åº“)
    â”‚
    â”œâ”€ BetPlatform æšä¸¾ (19ä¸ªç›˜å£)
    â”œâ”€ PlatformInfo ç±» (DefaultUrl, LegacyNames)
    â””â”€ BetPlatformHelper å·¥å…·ç±»
           â”‚
           â”œâ”€ GetAllPlatformNames()  // ç”¨äºUIä¸‹æ‹‰æ¡†
           â”œâ”€ GetDefaultUrl()        // è·å–é»˜è®¤URL
           â”œâ”€ Parse()                // å…¼å®¹æ—§æ•°æ®è½¬æ¢
           â”œâ”€ GetByIndex()           // æ ¹æ®ç´¢å¼•è·å–ç›˜å£
           â””â”€ GetIndex()             // è·å–ç›˜å£ç´¢å¼•
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```csharp
// 1. UI ä¸‹æ‹‰æ¡†å¡«å……
cbxPlatform.Items.Clear();
cbxPlatform.Items.AddRange(BetPlatformHelper.GetAllPlatformNames());

// 2. è·å–é»˜è®¤URL
string url = BetPlatformHelper.GetDefaultUrl(BetPlatform.é€šå®);

// 3. å…¼å®¹æ—§æ•°æ®è½¬æ¢
BetPlatform platform = BetPlatformHelper.Parse("TongBao");  // æ”¯æŒè‹±æ–‡å

// 4. ç´¢å¼•ä¸æšä¸¾äº’è½¬
int index = BetPlatformHelper.GetIndex(BetPlatform.é€šå®);
BetPlatform platform = BetPlatformHelper.GetByIndex(14);
```

---

## ğŸ“‹ è„šæœ¬æ¥å£ç»Ÿä¸€

### **IPlatformScript æ¥å£**

```csharp
public interface IPlatformScript
{
    /// <summary>
    /// ç™»å½•
    /// </summary>
    Task<bool> LoginAsync(string username, string password);
    
    /// <summary>
    /// è·å–ä½™é¢
    /// </summary>
    Task<decimal> GetBalanceAsync();
    
    /// <summary>
    /// ä¸‹æ³¨
    /// </summary>
    Task<(bool success, string orderId, string platformResponse)> PlaceBetAsync(BetStandardOrderList orders);
    
    /// <summary>
    /// å¤„ç†å“åº”ï¼ˆæ‹¦æˆªåˆ°çš„æ•°æ®ï¼‰
    /// </summary>
    void HandleResponse(BrowserResponseEventArgs response);
    
    /// <summary>
    /// è·å–èµ”ç‡åˆ—è¡¨
    /// </summary>
    List<BrowserOddsInfo> GetOddsList();
}
```

---

## ğŸ”§ å¦‚ä½•æ·»åŠ æ–°ç›˜å£

### 1. åœ¨ BetPlatform.cs ä¸­æ·»åŠ æšä¸¾

```csharp
public enum BetPlatform
{
    // ... ç°æœ‰ç›˜å£
    æ–°ç›˜å£ = 22
}
```

### 2. åœ¨ BetPlatformHelper ä¸­æ·»åŠ é…ç½®

```csharp
{
    BetPlatform.æ–°ç›˜å£, new PlatformInfo
    {
        Platform = BetPlatform.æ–°ç›˜å£,
        DefaultUrl = "https://new-platform.com/",
        LegacyNames = new[] { "NewPlatform", "NP" }
    }
}
```

### 3. åˆ›å»ºå¹³å°è„šæœ¬

**å¯¹äº BsBrowserClient (CefSharp)**:
- åˆ›å»º `BsBrowserClient/PlatformScripts/æ–°ç›˜å£Script.cs`
- å®ç° `IPlatformScript` æ¥å£
- åœ¨ `Form1.cs` çš„ `InitializePlatformScript()` ä¸­æ·»åŠ æ˜ å°„

**å¯¹äº zhaocaimao (WebView2)**:
- åˆ›å»º `zhaocaimao/Services/AutoBet/Browser/PlatformScripts/æ–°ç›˜å£Script.cs`
- å®ç° `IPlatformScript` æ¥å£
- åœ¨ `BetBrowserEngine.cs` çš„ `InitializePlatformScript()` ä¸­æ·»åŠ æ˜ å°„

### 4. æ·»åŠ è„šæœ¬æ˜ å°„

**BsBrowserClient/Form1.cs**:
```csharp
_platformScript = platform switch
{
    // ... ç°æœ‰æ˜ å°„
    BetPlatform.æ–°ç›˜å£ => new æ–°ç›˜å£Script(_webView!, betLogCallback),
    _ => new YunDing28Script(_webView!, betLogCallback)
};
```

**zhaocaimao/Services/AutoBet/Browser/BetBrowserEngine.cs**:
```csharp
_platformScript = platformEnum switch
{
    // ... ç°æœ‰æ˜ å°„
    BetPlatform.æ–°ç›˜å£ => Createæ–°ç›˜å£Script(logCallback),
    _ => CreateNoneSiteScript(logCallback)
};
```

---

## ğŸ“Š ä¸¤ä¸ªé¡¹ç›®çš„æ¶æ„å¯¹æ¯”

| ç‰¹æ€§ | BaiShengVx3Plus | zhaocaimao |
|------|-----------------|------------|
| æµè§ˆå™¨ç±»å‹ | **å¤–éƒ¨è¿›ç¨‹ (CefSharp)** | **å†…ç½®æ§ä»¶ (WebView2)** |
| æµè§ˆå™¨ç¨‹åº | `BsBrowserClient.exe` | è¿›ç¨‹å†…æ§ä»¶ |
| é€šä¿¡æ–¹å¼ | Socket (ç«¯å£ 19527) | ç›´æ¥è°ƒç”¨ |
| ä¾èµ– | CefSharp.WinForms | Microsoft.Web.WebView2 |
| ä¼˜ç‚¹ | å¯ç‹¬ç«‹è°ƒè¯•ã€è¿›ç¨‹éš”ç¦» | è½»é‡ã€é›†æˆåº¦é«˜ |
| ç¼ºç‚¹ | éœ€è¦é¢å¤–è¿›ç¨‹ã€èµ„æºå ç”¨é«˜ | WebView2 è¿è¡Œæ—¶ä¾èµ– |
| è„šæœ¬ä½ç½® | `BsBrowserClient/PlatformScripts/` | `zhaocaimao/Services/AutoBet/Browser/PlatformScripts/` |

---

## âœ… éªŒè¯æ¸…å•

- [âœ…] **ç›˜å£æšä¸¾**ï¼š19ä¸ªç›˜å£åœ¨ BetPlatform.cs ä¸­ç»Ÿä¸€å®šä¹‰
- [âœ…] **å¹³å°é…ç½®**ï¼šDefaultUrl å’Œ LegacyNames åœ¨ BetPlatformHelper ä¸­ç»Ÿä¸€ç®¡ç†
- [âœ…] **è„šæœ¬å®Œæ•´æ€§**ï¼š19ä¸ªç›˜å£éƒ½æœ‰å¯¹åº”çš„è„šæœ¬å®ç°
- [âœ…] **è„šæœ¬æ˜ å°„**ï¼šæ‰€æœ‰å¹³å°éƒ½æ­£ç¡®æ˜ å°„åˆ°å¯¹åº”è„šæœ¬
- [âœ…] **å¤ç”¨æ ‡è¯†**ï¼šå¤ªå¹³æ´‹â†”ï¸èŒ…å°ã€è“Bâ†”ï¸QTã€bingo168â†”ï¸HY168 æ­£ç¡®å¤ç”¨
- [âœ…] **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨åŒä¸€æ•°æ®æºï¼ˆBetConfigè¡¨ï¼‰
- [âœ…] **å¿«é€Ÿè®¾ç½®**ï¼šä½¿ç”¨åŒä¸€æ•°æ®æºï¼ˆBetConfigè¡¨ï¼‰
- [âœ…] **UIä¸‹æ‹‰æ¡†**ï¼šä½¿ç”¨ `BetPlatformHelper.GetAllPlatformNames()`

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### **ç»´æŠ¤ç›˜å£é…ç½®æ—¶**

åªéœ€ä¿®æ”¹**ä¸€å¤„ä»£ç **ï¼š
- `BaiShengVx3Plus.Shared/Platform/BetPlatform.cs`
- `zhaocaimao.Shared/Platform/BetPlatform.cs`

ä¸¤ä¸ªæ–‡ä»¶ä¿æŒåŒæ­¥å³å¯ï¼

### **æ·»åŠ æ–°ç›˜å£æ—¶**

1. åœ¨ `BetPlatform.cs` ä¸­å®šä¹‰æšä¸¾å’Œé…ç½®
2. åœ¨å¯¹åº”é¡¹ç›®çš„ `PlatformScripts/` ç›®å½•ä¸­åˆ›å»ºè„šæœ¬
3. åœ¨æµè§ˆå™¨å¼•æ“ä¸­æ·»åŠ æ˜ å°„

**UIä¼šè‡ªåŠ¨æ›´æ–°**ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹"é…ç½®ç®¡ç†"å’Œ"å¿«é€Ÿè®¾ç½®"çš„ä¸‹æ‹‰æ¡†ï¼

---

## ğŸš€ æ€»ç»“

### âœ… å·²å®Œæˆ

1. **ç»Ÿä¸€äº†19ä¸ªç›˜å£çš„å®šä¹‰å’Œé…ç½®**
2. **ä¸‰ä¸ªé¡¹ç›®çš„æ‰€æœ‰è„šæœ¬éƒ½å·²å®Œæ•´å®ç°**
3. **åˆ›å»ºäº†ç»Ÿä¸€çš„æ•°æ®æºç®¡ç†æ–¹æ¡ˆ**
4. **é…ç½®ç®¡ç†å’Œå¿«é€Ÿè®¾ç½®ä½¿ç”¨åŒä¸€ä»½ä»£ç **

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

- **ç»´æŠ¤æˆæœ¬ä½**ï¼šåªéœ€ä¿®æ”¹ä¸€å¤„é…ç½®
- **æ‰©å±•æ€§å¼º**ï¼šæ·»åŠ æ–°ç›˜å£æµç¨‹æ¸…æ™°
- **ä¸€è‡´æ€§é«˜**ï¼šä¸¤ä¸ªé¡¹ç›®ä½¿ç”¨ç›¸åŒçš„æšä¸¾å’Œé…ç½®
- **å…¼å®¹æ€§å¥½**ï¼šæ”¯æŒæ—§æ•°æ®çš„è‹±æ–‡åè½¬æ¢

---

**ğŸ‰ é¡¹ç›®å·²è¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼**


