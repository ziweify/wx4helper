# è„šæœ¬ä¿å­˜åŠŸèƒ½ - å®ŒæˆæŠ¥å‘Š

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. **ğŸ’¾ ä¿å­˜æŒ‰é’®**
- ä½ç½®ï¼šé¡¶éƒ¨å·¥å…·æ ï¼Œåœ¨"æ–°å»º"å’Œ"åˆ é™¤"ä¹‹é—´
- çŠ¶æ€ï¼š
  - é»˜è®¤ç¦ç”¨ï¼ˆç°è‰²ï¼‰
  - è„šæœ¬è¢«ä¿®æ”¹åè‡ªåŠ¨å¯ç”¨
  - ä¿å­˜åè‡ªåŠ¨ç¦ç”¨

### 2. **âŒ¨ï¸ Ctrl+S å¿«æ·é”®**
- âœ… æ‹¦æˆª Ctrl+S å¿«æ·é”®
- âœ… é˜»æ­¢ `ï¿½` å­—ç¬¦è¾“å…¥
- âœ… è§¦å‘ä¿å­˜å½“å‰è„šæœ¬
- âœ… å…¨å±€ç”Ÿæ•ˆï¼ˆçª—ä½“çº§åˆ« KeyPreviewï¼‰

### 3. **ğŸ“ ä¿®æ”¹æ ‡è®°**
- è„šæœ¬è¢«ä¿®æ”¹åï¼ŒTabæ ‡é¢˜è‡ªåŠ¨æ·»åŠ  ` *` æ ‡è®°
- ä¾‹å¦‚ï¼š`main.lua` â†’ `main.lua *`
- ä¿å­˜åè‡ªåŠ¨ç§»é™¤ `*` æ ‡è®°

### 4. **ğŸ’¾ ä¿å­˜é€»è¾‘**
```
1. è·å–å½“å‰Tabçš„ScriptInfo
2. æ›´æ–°ScriptInfo.Content = ç¼–è¾‘å™¨å†…å®¹
3. ä¿å­˜åˆ°æ–‡ä»¶ï¼ˆå¦‚æœæœ‰FilePathï¼‰
4. ç§»é™¤Tabæ ‡é¢˜çš„ * æ ‡è®°
5. ç¦ç”¨ä¿å­˜æŒ‰é’®
6. è®°å½•æ—¥å¿—
```

## ğŸ¯ å·¥å…·æ å¸ƒå±€ï¼ˆæ›´æ–°åï¼‰

```
â— æœ¬åœ° â—‹ è¿œç¨‹ â”‚ â• æ–°å»º ğŸ’¾ ä¿å­˜ ğŸ—‘ åˆ é™¤ ğŸ“‚ æ‰“å¼€ â”‚ â–¶ æ‰§è¡Œ âœ“ éªŒè¯ ğŸ“– å¸®åŠ©
                        â†‘
                    æ–°å¢çš„ä¿å­˜æŒ‰é’®
```

## ğŸ“‹ ä½¿ç”¨æ–¹å¼

### æ–¹å¼1ï¼šç‚¹å‡»ä¿å­˜æŒ‰é’®
1. ç¼–è¾‘è„šæœ¬å†…å®¹
2. Tabæ ‡é¢˜æ˜¾ç¤º `main.lua *`
3. ä¿å­˜æŒ‰é’®å˜ä¸ºå¯ç”¨ï¼ˆé«˜äº®ï¼‰
4. ç‚¹å‡» **ğŸ’¾ ä¿å­˜** æŒ‰é’®
5. è„šæœ¬ä¿å­˜åˆ°æ–‡ä»¶
6. Tabæ ‡é¢˜æ¢å¤ `main.lua`
7. ä¿å­˜æŒ‰é’®å˜ä¸ºç¦ç”¨ï¼ˆç°è‰²ï¼‰

### æ–¹å¼2ï¼šä½¿ç”¨ Ctrl+S å¿«æ·é”®
1. ç¼–è¾‘è„šæœ¬å†…å®¹
2. æŒ‰ **Ctrl+S**
3. è‡ªåŠ¨ä¿å­˜å½“å‰è„šæœ¬
4. âœ… **ä¸ä¼š**å†å‡ºç° `ï¿½` å­—ç¬¦

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. çª—ä½“çº§åˆ«æŒ‰é”®æ‹¦æˆª
```csharp
this.KeyPreview = true; // å¯ç”¨æŒ‰é”®é¢„è§ˆ
this.KeyDown += (s, e) =>
{
    if (e.Control && e.KeyCode == Keys.S)
    {
        e.Handled = true;          // é˜»æ­¢é»˜è®¤è¡Œä¸º
        e.SuppressKeyPress = true; // é˜»æ­¢å­—ç¬¦è¾“å…¥ï¼ˆé˜²æ­¢ï¿½ï¼‰
        OnSaveCurrentScript(tabControlScripts, btnSave);
    }
};
```

### 2. è„šæœ¬ä¿®æ”¹ç›‘å¬
```csharp
editor.ScriptTextChanged += (s, e) =>
{
    if (!tab.Text.EndsWith(" *"))
    {
        tab.Text += " *"; // æ ‡è®°ä¸ºå·²ä¿®æ”¹
    }
    btnSave.Enabled = true; // å¯ç”¨ä¿å­˜æŒ‰é’®
};
```

### 3. ä¿å­˜è„šæœ¬é€»è¾‘
```csharp
private void OnSaveCurrentScript(TabControl tabControl, ToolStripButton btnSave)
{
    var scriptInfo = currentTab.Tag as ScriptInfo;
    var editor = GetCurrentScriptEditor(tabControl);
    
    // æ›´æ–°å†…å®¹
    scriptInfo.Content = editor.ScriptText;
    
    // ä¿å­˜åˆ°æ–‡ä»¶
    File.WriteAllText(scriptInfo.FilePath, scriptInfo.Content, Encoding.UTF8);
    
    // ç§»é™¤ä¿®æ”¹æ ‡è®°
    currentTab.Text = currentTab.Text.Replace(" *", "");
    
    // ç¦ç”¨ä¿å­˜æŒ‰é’®
    btnSave.Enabled = false;
}
```

## âœ… è§£å†³çš„é—®é¢˜

### âŒ é—®é¢˜1ï¼šæ²¡æœ‰ä¿å­˜åŠŸèƒ½
**è§£å†³**ï¼šæ·»åŠ äº†"ğŸ’¾ ä¿å­˜"æŒ‰é’®å’Œä¿å­˜é€»è¾‘

### âŒ é—®é¢˜2ï¼šCtrl+S è¾“å…¥ `ï¿½` å­—ç¬¦
**è§£å†³**ï¼š
- ä½¿ç”¨çª—ä½“çº§åˆ« `KeyPreview = true`
- `e.Handled = true` é˜»æ­¢é»˜è®¤å¤„ç†
- `e.SuppressKeyPress = true` é˜»æ­¢å­—ç¬¦è¾“å…¥

### âŒ é—®é¢˜3ï¼šä¸çŸ¥é“è„šæœ¬æ˜¯å¦è¢«ä¿®æ”¹
**è§£å†³**ï¼šTabæ ‡é¢˜æ˜¾ç¤º `*` æ ‡è®°

### âŒ é—®é¢˜4ï¼šä¿å­˜æŒ‰é’®æ€»æ˜¯å¯ç‚¹å‡»
**è§£å†³**ï¼š
- æœªä¿®æ”¹æ—¶ç¦ç”¨
- ä¿®æ”¹åè‡ªåŠ¨å¯ç”¨
- ä¿å­˜åè‡ªåŠ¨ç¦ç”¨

## ğŸ‰ æµ‹è¯•æ­¥éª¤

1. **å…³é—­å½“å‰è¿è¡Œçš„ç¨‹åº**
2. **é‡æ–°ç¼–è¯‘**ï¼š`dotnet build YongLiSystem/YongLiSystem.csproj`
3. **è¿è¡Œç¨‹åº**
4. **æ‰“å¼€æµè§ˆå™¨ä»»åŠ¡çª—å£**
5. **ç‚¹å‡»"ğŸ“ è„šæœ¬"æ ‡ç­¾**
6. **æµ‹è¯•åŠŸèƒ½**ï¼š
   - åŒå‡»å·¦ä¾§è„šæœ¬åˆ—è¡¨çš„æ–‡ä»¶ï¼ˆå¦‚ main.luaï¼‰
   - åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥å†…å®¹
   - è§‚å¯ŸTabæ ‡é¢˜å˜ä¸º `main.lua *`
   - è§‚å¯Ÿ"ğŸ’¾ ä¿å­˜"æŒ‰é’®å˜ä¸ºé«˜äº®
   - æŒ‰ **Ctrl+S** æˆ–ç‚¹å‡»"ğŸ’¾ ä¿å­˜"
   - è§‚å¯ŸTabæ ‡é¢˜æ¢å¤ `main.lua`
   - è§‚å¯Ÿ"ğŸ’¾ ä¿å­˜"æŒ‰é’®å˜ä¸ºç°è‰²
   - âœ… **ç¡®è®¤æ²¡æœ‰å‡ºç° `ï¿½` å­—ç¬¦**

## ğŸ“Š ç¼–è¯‘çŠ¶æ€

```
âœ… Unit.la - ç¼–è¯‘æˆåŠŸ
âœ… æ‰€æœ‰åŠŸèƒ½å·²å®ç°
```

---

**å®Œæˆæ—¶é—´**: 2026-01-22  
**åŠŸèƒ½çŠ¶æ€**: âœ… ä¿å­˜åŠŸèƒ½å®Œæ•´å®ç°  
**å¿«æ·é”®çŠ¶æ€**: âœ… Ctrl+S æ­£å¸¸å·¥ä½œï¼Œä¸å†è¾“å…¥ ï¿½ å­—ç¬¦
