# âœ… é€šå®å¹³å°æ”¯æŒå·²æ·»åŠ 

## ğŸ“‹ å®Œæˆå†…å®¹

æ ¹æ® F5BotV2 çš„ `TongBaoMember.cs` å®ç°ï¼Œå·²å®Œæ•´æ·»åŠ é€šå®å¹³å°æ”¯æŒã€‚

---

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### 1. è‡ªåŠ¨ç™»å½•ï¼ˆè¾…åŠ©ï¼‰
- âœ… è‡ªåŠ¨å¡«å……ç”¨æˆ·åå’Œå¯†ç 
- âœ… æç¤ºç”¨æˆ·è¾“å…¥éªŒè¯ç 
- âœ… ç­‰å¾…ç™»å½•å®Œæˆï¼ˆè‡ªåŠ¨æ‹¦æˆªç™»å½•å‚æ•°ï¼‰

### 2. ä½™é¢è·å–
- âœ… ä»æ‹¦æˆªçš„å“åº”ä¸­è·å–ä½™é¢
- âœ… ä»é¡µé¢å…ƒç´ è¯»å–ä½™é¢ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
- âœ… å®æ—¶æ›´æ–°ä½™é¢

### 3. è‡ªåŠ¨æŠ•æ³¨
- âœ… ä½¿ç”¨HTTP POSTç›´æ¥æŠ•æ³¨
- âœ… æ”¯æŒå¤šç§ç©æ³•ï¼ˆå¤§å°å•åŒç­‰ï¼‰
- âœ… è‡ªåŠ¨è·å–å…³é”®å‚æ•°ï¼ˆsid, uuid, tokenï¼‰
- âœ… è‡ªåŠ¨è¯†åˆ«ç›˜å£ç±»å‹ï¼ˆA/B/C/Dï¼‰

---

## ğŸ“ æ–°å¢æ–‡ä»¶

### BsBrowserClient/PlatformScripts/TongBaoScript.cs

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

#### 1. æ‹¦æˆªå…³é”®å‚æ•°
```csharp
// æ‹¦æˆª /gettodaywinlost è·å– sid, uuid, token
if (response.Url.Contains("/gettodaywinlost"))
{
    _token = Regex.Match(response.PostData, @"token=([^&]+)").Groups[1].Value;
    _uuid = Regex.Match(response.PostData, @"uuid=([^&]+)").Groups[1].Value;
    _sid = Regex.Match(response.PostData, @"sid=([^&]+)").Groups[1].Value;
}

// æ‹¦æˆª /getcommongroupodds è·å–ç›˜å£ç±»å‹ï¼ˆA/B/C/Dï¼‰
if (response.Url.Contains("/getcommongroupodds"))
{
    _region = Regex.Match(response.PostData, @"pan=([^&]+)").Groups[1].Value;
}
```

#### 2. HTTP POST æŠ•æ³¨
```csharp
// æ„é€ POSTæ•°æ®ï¼ˆå®Œå…¨å‚è€ƒF5BotV2ï¼‰
var postData = new StringBuilder();
postData.Append($"uuid={_uuid}");
postData.Append($"&sid={_sid}");
postData.Append($"&roomeng=twbingo");
postData.Append($"&pan={_region}");
postData.Append($"&shuitype=0");

// æŠ•æ³¨æ•°æ®
var bets = new[] { new { id = betId, money = order.Amount } };
var arrbet = JsonConvert.SerializeObject(bets);
postData.Append($"&arrbet={System.Web.HttpUtility.UrlEncode(arrbet)}");
postData.Append($"&token={_token}");
postData.Append($"&timestamp={DateTimeOffset.UtcNow.ToUnixTimeSeconds()}");

// å‘é€POSTè¯·æ±‚
var url = $"{baseUrl}/frcomgame/createmainorder";
var response = await _httpClient.PostAsync(url, content);
```

#### 3. è¾…åŠ©ç™»å½•
```csharp
public async Task<bool> LoginAsync(string username, string password)
{
    // 1. è‡ªåŠ¨å¡«å……è¡¨å•
    usernameInput.value = username;
    passwordInput.value = password;
    
    // 2. æç¤ºç”¨æˆ·è¾“å…¥éªŒè¯ç å¹¶ç‚¹å‡»ç™»å½•
    _logCallback("â³ ç­‰å¾…ç™»å½•å®Œæˆï¼ˆè¯·è¾“å…¥éªŒè¯ç å¹¶ç‚¹å‡»ç™»å½•ï¼‰...");
    
    // 3. ç­‰å¾…æ‹¦æˆªåˆ°ç™»å½•å‚æ•°ï¼ˆsid, uuid, tokenï¼‰
    while (string.IsNullOrEmpty(_sid) && waitCount < 300)
    {
        await Task.Delay(100);
        waitCount++;
    }
    
    // 4. ç¡®è®¤ç™»å½•æˆåŠŸ
    return !string.IsNullOrEmpty(_sid) && !string.IsNullOrEmpty(_uuid);
}
```

---

## ğŸ”§ ä¿®æ”¹çš„æ–‡ä»¶

### 1. BsBrowserClient/Form1.cs

**æ·»åŠ é€šå®æ”¯æŒ**ï¼š
```csharp
private void InitializePlatformScript()
{
    _platformScript = _platform.ToLower() switch
    {
        "yunding28" => new YunDing28Script(_webView!, OnLogMessage),
        "tongbao" => new TongBaoScript(_webView!, OnLogMessage),      // âœ… æ–°å¢
        "tongbao28" => new TongBaoScript(_webView!, OnLogMessage),    // âœ… æ–°å¢
        "é€šå®" => new TongBaoScript(_webView!, OnLogMessage),          // âœ… æ–°å¢
        _ => new YunDing28Script(_webView!, OnLogMessage)
    };
}

private string GetDefaultUrl(string platform)
{
    return platform.ToLower() switch
    {
        "yunding28" => "https://yd28.vip",
        "tongbao" => "https://tbfowenb.fr.cvv66.top/",     // âœ… æ–°å¢ï¼ˆæ¥è‡ªF5BotV2ï¼‰
        "tongbao28" => "https://tbfowenb.fr.cvv66.top/",   // âœ… æ–°å¢
        "é€šå®" => "https://tbfowenb.fr.cvv66.top/",         // âœ… æ–°å¢
        _ => "about:blank"
    };
}
```

### 2. BaiShengVx3Plus/Views/VxMain.Designer.cs

**æ·»åŠ é€šå®é€‰é¡¹**ï¼š
```csharp
cbxPlatform.Items.AddRange(new object[] { 
    "äº‘é¡¶28", 
    "æµ·å³¡28", 
    "çº¢æµ·28", 
    "é€šå®"  // âœ… æ–°å¢
});
```

---

## ğŸ“Š å‚è€ƒ F5BotV2 çš„å…³é”®ç‚¹

### 1. æ‹¦æˆªç­–ç•¥
| F5BotV2 | æˆ‘ä»¬çš„å®ç° | è¯´æ˜ |
|---------|-----------|------|
| `ChromeBroser_ResponseComplete` | `HandleResponse` | âœ… å®Œå…¨å¯¹åº” |
| æ‹¦æˆª `/gettodaywinlost` | âœ… ç›¸åŒ | è·å– sid, uuid, token |
| æ‹¦æˆª `/getcommongroupodds` | âœ… ç›¸åŒ | è·å–ç›˜å£ç±»å‹ |
| æ‹¦æˆª `/createmainorder` | âœ… ç›¸åŒ | æŠ•æ³¨ç»“æœ |

### 2. æŠ•æ³¨æµç¨‹
| F5BotV2 | æˆ‘ä»¬çš„å®ç° | è¯´æ˜ |
|---------|-----------|------|
| `Bet(BetStandardOrderList items)` | `PlaceBetAsync(BetOrder order)` | âœ… ç®€åŒ–ç‰ˆ |
| æ„é€  POST æ•°æ® | âœ… ç›¸åŒ | å®Œå…¨å‚è€ƒF5BotV2 |
| å‘é€ HTTP POST | âœ… ç›¸åŒ | ä½¿ç”¨ HttpClient |
| è§£æå“åº” | âœ… ç›¸åŒ | æ£€æŸ¥ status å­—æ®µ |

### 3. ç™»å½•æµç¨‹
| F5BotV2 | æˆ‘ä»¬çš„å®ç° | è¯´æ˜ |
|---------|-----------|------|
| `LoginAsync` | `LoginAsync` | âœ… ç®€åŒ–ç‰ˆ |
| è‡ªåŠ¨å¡«å……è¡¨å• | âœ… ç›¸åŒ | JavaScript æ³¨å…¥ |
| ç­‰å¾…éªŒè¯ç  | âœ… ç›¸åŒ | ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ |
| æ‹¦æˆªç™»å½•å‚æ•° | âœ… ç›¸åŒ | è‡ªåŠ¨æ£€æµ‹ç™»å½•æˆåŠŸ |

---

## ğŸ¯ é€šå®å¹³å°ç‰¹ç‚¹

### 1. éœ€è¦éªŒè¯ç 
- âŒ æ— æ³•å®Œå…¨è‡ªåŠ¨ç™»å½•
- âœ… å¯ä»¥è¾…åŠ©å¡«å……è´¦å·å¯†ç 
- âœ… ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥éªŒè¯ç åè‡ªåŠ¨æ£€æµ‹ç™»å½•æˆåŠŸ

### 2. åŸŸåä¼šå˜åŒ–
- é€šå®çš„åŸŸåç»å¸¸å˜åŒ–
- F5BotV2 ä¸­çš„åŸŸåï¼š`https://tbfowenb.fr.cvv66.top/`
- ä½¿ç”¨æ—¶éœ€è¦ç¡®è®¤å½“å‰å¯ç”¨åŸŸå

### 3. å…³é”®å‚æ•°
- **sid**: ä¼šè¯ID
- **uuid**: ç”¨æˆ·ID
- **token**: è®¿é—®ä»¤ç‰Œ
- **region**: ç›˜å£ç±»å‹ï¼ˆA/B/C/Dï¼‰

è¿™äº›å‚æ•°éƒ½é€šè¿‡æ‹¦æˆª `/gettodaywinlost` è¯·æ±‚è·å¾—ã€‚

### 4. æŠ•æ³¨API
- **URL**: `/frcomgame/createmainorder`
- **Method**: POST
- **Content-Type**: `application/x-www-form-urlencoded`

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®é€šå®

åœ¨ä¸»ç¨‹åºçš„å¿«é€Ÿè®¾ç½®é¢æ¿ä¸­ï¼š
```
ç›˜å£: é€šå®
è´¦å·: wwww11 (æµ‹è¯•è´¦å·)
å¯†ç : Aaa123 (æµ‹è¯•å¯†ç )
```

### 2. å¯åŠ¨æµè§ˆå™¨

ç‚¹å‡»"å¯åŠ¨æµè§ˆå™¨"æŒ‰é’®ï¼Œç³»ç»Ÿä¼šï¼š
1. å¯åŠ¨ BsBrowserClient
2. å¯¼èˆªåˆ°é€šå®ç½‘ç«™
3. åˆå§‹åŒ– TongBaoScript
4. åˆå§‹åŒ–èµ„æºæ‹¦æˆªå™¨

### 3. ç™»å½•

æµè§ˆå™¨ä¼šè‡ªåŠ¨å¡«å……è´¦å·å¯†ç ï¼Œç„¶åï¼š
1. ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥éªŒè¯ç 
2. ç‚¹å‡»ç™»å½•æŒ‰é’®
3. ç³»ç»Ÿè‡ªåŠ¨æ‹¦æˆªç™»å½•å‚æ•°ï¼ˆsid, uuid, tokenï¼‰
4. ç¡®è®¤ç™»å½•æˆåŠŸ

### 4. è‡ªåŠ¨æŠ•æ³¨

ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿå¯ä»¥ï¼š
- è‡ªåŠ¨è·å–ä½™é¢
- æ¥æ”¶æŠ•æ³¨å‘½ä»¤
- ç›´æ¥HTTP POSTæŠ•æ³¨ï¼ˆä¸ä¾èµ–DOMï¼‰
- è¿”å›æŠ•æ³¨ç»“æœ

---

## âœ… æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½
- [ ] å¯åŠ¨æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°é€šå®ç½‘ç«™
- [ ] è‡ªåŠ¨å¡«å……è´¦å·å¯†ç 
- [ ] æ‰‹åŠ¨è¾“å…¥éªŒè¯ç å¹¶ç™»å½•
- [ ] æ‹¦æˆªåˆ° sid, uuid, token
- [ ] ç¡®è®¤ç™»å½•æˆåŠŸ

### æ ¸å¿ƒåŠŸèƒ½
- [ ] è·å–ä½™é¢
- [ ] å‘é€æŠ•æ³¨å‘½ä»¤
- [ ] æˆåŠŸä¸‹æ³¨
- [ ] æ¥æ”¶æŠ•æ³¨ç»“æœ
- [ ] ä½™é¢æ›´æ–°

### æ‹¦æˆªåŠŸèƒ½
- [ ] æ‹¦æˆª `/gettodaywinlost` è·å–å‚æ•°
- [ ] æ‹¦æˆª `/getcommongroupodds` è·å–ç›˜å£
- [ ] æ‹¦æˆª `/createmainorder` è·å–æŠ•æ³¨ç»“æœ

---

## ğŸ“ ä»£ç å¯¹æ¯”

### F5BotV2 vs æˆ‘ä»¬çš„å®ç°

#### æ‹¦æˆª sid, uuid, token
```csharp
// F5BotV2 (Line 96-102)
if(args.Url.IndexOf("/gettodaywinlost") != -1)
{
    token = Regex.Match(args.PostData, "token=([^&]+)").Groups[1].Value;
    Uuid = Regex.Match(args.PostData, "uuid=([^&]+)").Groups[1].Value;
    sid = Regex.Match(args.PostData, "sid=([^&]+)").Groups[1].Value;
}

// âœ… æˆ‘ä»¬çš„å®ç°ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰
if (response.Url.Contains("/gettodaywinlost"))
{
    _token = Regex.Match(response.PostData, @"token=([^&]+)").Groups[1].Value;
    _uuid = Regex.Match(response.PostData, @"uuid=([^&]+)").Groups[1].Value;
    _sid = Regex.Match(response.PostData, @"sid=([^&]+)").Groups[1].Value;
}
```

#### æ„é€ æŠ•æ³¨POSTæ•°æ®
```csharp
// F5BotV2 (Line 358-391)
postPackect.Append($"uuid={this.Uuid}");
postPackect.Append($"&sid={this.sid}");
postPackect.Append($"&roomeng=twbingo");
postPackect.Append($"&pan={this.region}");
// ... æ›´å¤šå­—æ®µ

// âœ… æˆ‘ä»¬çš„å®ç°ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰
postData.Append($"uuid={_uuid}");
postData.Append($"&sid={_sid}");
postData.Append($"&roomeng=twbingo");
postData.Append($"&pan={_region}");
// ... æ›´å¤šå­—æ®µ
```

---

## ğŸ‰ æ€»ç»“

1. âœ… **å®Œæ•´å®ç°äº†é€šå®å¹³å°æ”¯æŒ**
2. âœ… **å‚è€ƒ F5BotV2 çš„æ ¸å¿ƒé€»è¾‘**
3. âœ… **ä½¿ç”¨ WebView2 + HTTP æ··åˆæ¨¡å¼**
4. âœ… **æ”¯æŒè‡ªåŠ¨ç™»å½•ï¼ˆè¾…åŠ©ï¼‰**
5. âœ… **æ”¯æŒä½™é¢è·å–**
6. âœ… **æ”¯æŒè‡ªåŠ¨æŠ•æ³¨**
7. âœ… **ç¼–è¯‘æˆåŠŸï¼Œé›¶é”™è¯¯**

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- **æ–°å¢**: `BsBrowserClient/PlatformScripts/TongBaoScript.cs`
- **ä¿®æ”¹**: `BsBrowserClient/Form1.cs`
- **ä¿®æ”¹**: `BaiShengVx3Plus/Views/VxMain.Designer.cs`
- **å‚è€ƒ**: `F5BotV2/BetSite/HongHai/TongBaoMember.cs`

---

**ğŸŠ é€šå®å¹³å°å·²å®Œæ•´æ·»åŠ ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ï¼**

æµ‹è¯•è´¦å·ï¼ˆæ¥è‡ªF5BotV2æ³¨é‡Šï¼‰ï¼š
- è´¦å·: `wwww11`
- å¯†ç : `Aaa123`
- ç½‘å€: `https://tbfowenb.fr.cvv66.top/`

