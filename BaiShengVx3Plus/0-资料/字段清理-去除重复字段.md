# å­—æ®µæ¸…ç† - å»é™¤é‡å¤å­—æ®µ

## ğŸ¯ é—®é¢˜å‘ç°

åœ¨å¯¹ç…§ `F5BotV2` åï¼Œå‘ç° `BaiShengVx3Plus` çš„ `V2Member` å’Œ `V2MemberOrder` æ¨¡å‹ä¸­å­˜åœ¨å¤§é‡é‡å¤å­—æ®µã€‚

---

## ğŸ”¥ V2Member å­—æ®µæ¸…ç†

### æ¸…ç†å‰çš„é‡å¤å­—æ®µ

| æ—§å­—æ®µï¼ˆå·²åˆ é™¤ï¼‰  | å¯¹åº”çš„æ–°å­—æ®µ | è¯´æ˜           |
|-------------------|--------------|----------------|
| `MemberId`        | `Id`         | ä¸»é”®é‡å¤       |
| `MemberName`      | `Nickname`   | æ˜µç§°é‡å¤       |
| `MemberAlias`     | `Account`    | è´¦å·é‡å¤       |
| `MemberAmount`    | `Balance`    | ä½™é¢é‡å¤       |
| `MemberState`     | `State`      | çŠ¶æ€é‡å¤       |
| `TimeStampCreate` | -            | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰|
| `TimeStampUpdate` | -            | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰|
| `TimeStampBet`    | -            | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰|
| `Extra`           | -            | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰|

### æ¸…ç†åçš„å­—æ®µï¼ˆå¯¹ç…§ F5BotV2ï¼‰

```csharp
/// ğŸ”¥ å­—æ®µå¯¹ç…§ï¼ˆå‚è€ƒ F5BotV2ï¼‰ï¼š
/// - Id = ä¸»é”®ï¼ˆè‡ªå¢ï¼‰
/// - GroupWxId = ç¾¤ID
/// - Wxid = å¾®ä¿¡ID
/// - Account = å¾®ä¿¡å·ï¼ˆå¯¹åº” F5BotV2 çš„ accountï¼‰
/// - Nickname = æ˜µç§°ï¼ˆå¯¹åº” F5BotV2 çš„ nicknameï¼‰
/// - DisplayName = ç¾¤æ˜µç§°ï¼ˆå¯¹åº” F5BotV2 çš„ display_nameï¼‰
/// - Balance = ä½™é¢ï¼ˆå¯¹åº” F5BotV2 çš„ Balanceï¼‰
/// - State = çŠ¶æ€ï¼ˆå¯¹åº” F5BotV2 çš„ Stateï¼‰
/// - BetCur = æœ¬æœŸä¸‹æ³¨
/// - BetWait = å¾…ç»“ç®—
/// - IncomeToday = ä»Šæ—¥ç›ˆäº
/// - CreditToday = ä»Šæ—¥ä¸Šåˆ†
/// - BetToday = ä»Šæ—¥ä¸‹æ³¨
/// - WithdrawToday = ä»Šæ—¥ä¸‹åˆ†
/// - BetTotal = æ€»ä¸‹æ³¨
/// - CreditTotal = æ€»ä¸Šåˆ†
/// - WithdrawTotal = æ€»ä¸‹åˆ†
/// - IncomeTotal = æ€»ç›ˆäº
```

### æœ€ç»ˆçš„ V2Member å­—æ®µåˆ—è¡¨

```csharp
// ä¸»é”®
[PrimaryKey, AutoIncrement]
public long Id { get; set; }

// è”ç³»äººä¿¡æ¯ï¼ˆæ¥è‡ª IWxContactsï¼‰
[Indexed] public string GroupWxId { get; set; }     // ç¾¤ID
[Indexed] public string? Wxid { get; set; }         // å¾®ä¿¡ID
public string? Account { get; set; }                // å¾®ä¿¡å·
public string? Nickname { get; set; }               // æ˜µç§°
public string? DisplayName { get; set; }            // ç¾¤æ˜µç§°

// ä¸šåŠ¡ç»Ÿè®¡å­—æ®µ
public float Balance { get; set; }                  // ä½™é¢
public MemberState State { get; set; }              // çŠ¶æ€
public float BetCur { get; set; }                   // æœ¬æœŸä¸‹æ³¨
public float BetWait { get; set; }                  // å¾…ç»“ç®—
public float IncomeToday { get; set; }              // ä»Šæ—¥ç›ˆäº
public float CreditToday { get; set; }              // ä»Šæ—¥ä¸Šåˆ†
public float BetToday { get; set; }                 // ä»Šæ—¥ä¸‹æ³¨
public float WithdrawToday { get; set; }            // ä»Šæ—¥ä¸‹åˆ†
public float BetTotal { get; set; }                 // æ€»ä¸‹æ³¨
public float CreditTotal { get; set; }              // æ€»ä¸Šåˆ†
public float WithdrawTotal { get; set; }            // æ€»ä¸‹åˆ†
public float IncomeTotal { get; set; }              // æ€»ç›ˆäº
```

---

## ğŸ”¥ V2MemberOrder å­—æ®µæ¸…ç†

### æ¸…ç†å‰çš„é‡å¤å­—æ®µ

| æ—§å­—æ®µï¼ˆå·²åˆ é™¤ï¼‰      | å¯¹åº”çš„æ–°å­—æ®µ  | è¯´æ˜                  |
|-----------------------|---------------|-----------------------|
| `MemberId`            | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `MemberName`          | `Nickname`    | æ˜µç§°é‡å¤              |
| `OrderId`             | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `OrderAmountPlan`     | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `OrderAmount`         | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `OrderResult`         | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `OrderTarget`         | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `OrderPlace`          | -             | æ— ç”¨ï¼ˆF5BotV2æ²¡æœ‰ï¼‰   |
| `TimeStampCreate`     | -             | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰      |
| `TimeStampUpdate`     | -             | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰      |
| `Extra`               | -             | æœªä½¿ç”¨ï¼ˆå·²åˆ é™¤ï¼‰      |

### æ¸…ç†åçš„å­—æ®µï¼ˆå¯¹ç…§ F5BotV2ï¼‰

```csharp
/// ğŸ”¥ å­—æ®µå¯¹ç…§ï¼ˆå‚è€ƒ F5BotV2 çš„ V2MemberOrderï¼‰ï¼š
/// - Id = ä¸»é”®ï¼ˆè‡ªå¢ï¼‰
/// - GroupWxId = ç¾¤ID
/// - Wxid = ä¼šå‘˜å¾®ä¿¡ID
/// - Account = ä¼šå‘˜å·ç 
/// - Nickname = ä¼šå‘˜æ˜µç§°
/// - IssueId = æœŸå·
/// - TimeStampBet = ä¸‹æ³¨æ—¶é—´æˆ³
/// - BetContentOriginal = åŸå§‹æŠ•æ³¨å†…å®¹
/// - BetContentStandar = æ ‡å‡†æŠ•æ³¨å†…å®¹
/// - Nums = æ³¨ç æ•°é‡
/// - AmountTotal = æŠ•æ³¨æ€»é‡‘é¢
/// - Profit = ç›ˆåˆ©
/// - NetProfit = çº¯åˆ©
/// - Odds = èµ”ç‡
/// - OrderStatus = è®¢å•çŠ¶æ€
/// - OrderType = è®¢å•ç±»å‹
/// - TimeString = æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
/// - Notes = å¤‡æ³¨
```

### æœ€ç»ˆçš„ V2MemberOrder å­—æ®µåˆ—è¡¨

```csharp
// ä¸»é”®
[PrimaryKey, AutoIncrement]
public long Id { get; set; }

// è”ç³»äººä¿¡æ¯ï¼ˆæ¥è‡ª IWxContactsï¼‰
[Indexed] public string GroupWxId { get; set; }     // ç¾¤ID
[Indexed] public string? Wxid { get; set; }         // ä¼šå‘˜å¾®ä¿¡ID
public string? Account { get; set; }                // ä¼šå‘˜å·ç 
public string? Nickname { get; set; }               // ä¼šå‘˜æ˜µç§°

// ä¸šåŠ¡è®¢å•å­—æ®µ
[Indexed] public int IssueId { get; set; }          // æœŸå·
public long TimeStampBet { get; set; }              // ä¸‹æ³¨æ—¶é—´æˆ³
public string? BetContentOriginal { get; set; }     // åŸå§‹æŠ•æ³¨å†…å®¹
public string? BetContentStandar { get; set; }      // æ ‡å‡†æŠ•æ³¨å†…å®¹
public int Nums { get; set; }                       // æ³¨ç æ•°é‡
public float AmountTotal { get; set; }              // æŠ•æ³¨æ€»é‡‘é¢
public float Profit { get; set; }                   // ç›ˆåˆ©
public float NetProfit { get; set; }                // çº¯åˆ©
public float Odds { get; set; }                     // èµ”ç‡
public OrderStatus OrderStatus { get; set; }        // è®¢å•çŠ¶æ€
public OrderType OrderType { get; set; }            // è®¢å•ç±»å‹
public string? TimeString { get; set; }             // æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
public string? Notes { get; set; }                  // å¤‡æ³¨
```

---

## ğŸ“Š æ¸…ç†æ•ˆæœå¯¹æ¯”

### V2Member

| é¡¹ç›®         | æ¸…ç†å‰ | æ¸…ç†å | å‡å°‘ |
|--------------|--------|--------|------|
| ç§æœ‰å­—æ®µ     | 28     | 16     | -12  |
| å…¬å…±å±æ€§     | 28     | 16     | -12  |
| ä»£ç è¡Œæ•°     | ~270   | ~190   | -80  |
| é‡å¤å­—æ®µ     | 9      | 0      | -9   |

### V2MemberOrder

| é¡¹ç›®         | æ¸…ç†å‰ | æ¸…ç†å | å‡å°‘ |
|--------------|--------|--------|------|
| ç§æœ‰å­—æ®µ     | 24     | 14     | -10  |
| å…¬å…±å±æ€§     | 24     | 14     | -10  |
| ä»£ç è¡Œæ•°     | ~280   | ~220   | -60  |
| é‡å¤å­—æ®µ     | 11     | 0      | -11  |

---

## âœ… æ¸…ç†ä¼˜åŠ¿

### 1. æ¶ˆé™¤æ··æ·†
**æ¸…ç†å‰**ï¼š
```csharp
// âŒ å“ªä¸ªæ˜¯çœŸæ­£çš„æ˜µç§°ï¼Ÿ
member.MemberName = "å¼ ä¸‰";
member.Nickname = "å°å¼ ";

// âŒ å“ªä¸ªæ˜¯çœŸæ­£çš„ä½™é¢ï¼Ÿ
member.MemberAmount = 100;
member.Balance = 150;
```

**æ¸…ç†å**ï¼š
```csharp
// âœ… å­—æ®µå”¯ä¸€ï¼Œä¸ä¼šæ··æ·†
member.Nickname = "å¼ ä¸‰";
member.Balance = 100;
```

### 2. å‡å°‘é”™è¯¯
**æ¸…ç†å‰**ï¼š
```csharp
// âŒ å¯èƒ½å†™é”™å­—æ®µ
if (member.MemberAmount > 100) { }
// âŒ æˆ–è€…å†™æˆ
if (member.Balance > 100) { }
// åˆ°åº•åº”è¯¥ç”¨å“ªä¸ªï¼Ÿ
```

**æ¸…ç†å**ï¼š
```csharp
// âœ… åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œä¸ä¼šå†™é”™
if (member.Balance > 100) { }
```

### 3. ç®€åŒ–ç»´æŠ¤
**æ¸…ç†å‰**ï¼š
```csharp
// âŒ éœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªé‡å¤å­—æ®µ
member.MemberName = contact.Nickname;
member.Nickname = contact.Nickname;
member.MemberAlias = contact.Account;
member.Account = contact.Account;
```

**æ¸…ç†å**ï¼š
```csharp
// âœ… åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªå­—æ®µ
member.Nickname = contact.Nickname;
member.Account = contact.Account;
```

### 4. æé«˜å¯è¯»æ€§
**æ¸…ç†å‰**ï¼š
```csharp
// âŒ å­—æ®µå‘½åä¸ä¸€è‡´
V2Member: MemberAmount, MemberName, MemberAlias
V2MemberOrder: AmountTotal, Nickname, Account
```

**æ¸…ç†å**ï¼š
```csharp
// âœ… å­—æ®µå‘½åä¸€è‡´ï¼ˆä¸ F5BotV2 ä¸€è‡´ï¼‰
V2Member: Balance, Nickname, Account
V2MemberOrder: AmountTotal, Nickname, Account
```

### 5. å‡å°‘æ•°æ®åº“å†—ä½™
**æ¸…ç†å‰**ï¼š
```sql
-- âŒ æ•°æ®åº“è¡¨ä¸­æœ‰ 9 ä¸ªå†—ä½™å­—æ®µ
CREATE TABLE V2Member (
    Id INTEGER PRIMARY KEY,
    MemberId INTEGER,      -- å†—ä½™
    MemberName TEXT,       -- å†—ä½™
    MemberAlias TEXT,      -- å†—ä½™
    MemberAmount REAL,     -- å†—ä½™
    Nickname TEXT,
    Account TEXT,
    Balance REAL,
    ...
);
```

**æ¸…ç†å**ï¼š
```sql
-- âœ… æ•°æ®åº“è¡¨æ²¡æœ‰å†—ä½™å­—æ®µ
CREATE TABLE V2Member (
    Id INTEGER PRIMARY KEY,
    Nickname TEXT,
    Account TEXT,
    Balance REAL,
    ...
);
```

---

## ğŸ” è¿ç§»æŒ‡å—

### å¦‚æœæœ‰æ—§æ•°æ®åº“

å¦‚æœä¹‹å‰çš„æ•°æ®åº“ä¸­ä½¿ç”¨äº†æ—§å­—æ®µåï¼Œéœ€è¦è¿›è¡Œæ•°æ®è¿ç§»ï¼š

```csharp
// è¿ç§» V2Member æ•°æ®
var oldMembers = _db.Query<OldV2Member>("SELECT * FROM V2Member");
foreach (var old in oldMembers)
{
    var newMember = new V2Member
    {
        Id = old.Id,
        GroupWxId = old.GroupWxId,
        Wxid = old.Wxid,
        Account = old.Account,           // âœ… ä¿æŒä¸å˜
        Nickname = old.Nickname,         // âœ… ä¿æŒä¸å˜
        DisplayName = old.DisplayName,
        Balance = old.Balance,           // âœ… ä¿æŒä¸å˜ï¼ˆä¸å†ç”¨ MemberAmountï¼‰
        State = old.State,               // âœ… ä¿æŒä¸å˜ï¼ˆä¸å†ç”¨ MemberStateï¼‰
        // ... å…¶ä»–å­—æ®µ
    };
    _db.Update(newMember);
}
```

---

## ğŸ“ æ€»ç»“

### âœ… æ¸…ç†æˆæœ

1. âœ… **V2Member**: åˆ é™¤ 9 ä¸ªé‡å¤å­—æ®µï¼Œå‡å°‘ ~80 è¡Œä»£ç 
2. âœ… **V2MemberOrder**: åˆ é™¤ 11 ä¸ªé‡å¤å­—æ®µï¼Œå‡å°‘ ~60 è¡Œä»£ç 
3. âœ… **å­—æ®µå‘½å**: ä¸ F5BotV2 å®Œå…¨ä¸€è‡´ï¼Œä¾¿äºç»´æŠ¤
4. âœ… **ä»£ç ç®€æ´**: æ¶ˆé™¤æ··æ·†ï¼Œå‡å°‘é”™è¯¯
5. âœ… **æ•°æ®åº“ç²¾ç®€**: å‡å°‘å†—ä½™åˆ—ï¼Œæé«˜æ€§èƒ½

### âœ… æ ¸å¿ƒåŸåˆ™

- **å”¯ä¸€æ€§**: æ¯ä¸ªä¸šåŠ¡æ¦‚å¿µåªæœ‰ä¸€ä¸ªå­—æ®µè¡¨ç¤º
- **ä¸€è‡´æ€§**: å­—æ®µå‘½åä¸ F5BotV2 ä¿æŒä¸€è‡´
- **ç®€æ´æ€§**: åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å­—æ®µ
- **å¯ç»´æŠ¤æ€§**: å‡å°‘ä»£ç é‡ï¼Œæé«˜å¯è¯»æ€§

---

**åˆ›å»ºæ—¥æœŸ**: 2025-11-06  
**çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æ ¸å¿ƒç›®æ ‡**: ç²¾ç®€ã€ç°ä»£åŒ–ã€æ˜“ç»´æŠ¤

