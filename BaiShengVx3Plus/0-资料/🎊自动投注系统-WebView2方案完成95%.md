# ğŸŠ è‡ªåŠ¨æŠ•æ³¨ç³»ç»Ÿ - WebView2æ–¹æ¡ˆå®Œæˆ95%!

## âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

### 1. æµè§ˆå™¨å¼•æ“åˆ‡æ¢
- âœ… ä» CefSharp åˆ‡æ¢åˆ° WebView2
- âœ… ä½“ç§¯ä» 180MB é™ä½åˆ° 8MB
- âœ… å®Œç¾æ”¯æŒ .NET 8

### 2. HTTPæ‹¦æˆªç³»ç»Ÿ
- âœ… WebView2ResourceHandlerï¼ˆæ‹¦æˆªæ‰€æœ‰è¯·æ±‚å’Œå“åº”ï¼‰
- âœ… è·å–POSTè¯·æ±‚bodyï¼ˆDevTools Protocolï¼‰
- âœ… è·å–å“åº”å†…å®¹ï¼ˆGetContentAsyncï¼‰
- âœ… ä¸F5BotV2åŠŸèƒ½å®Œå…¨ä¸€è‡´

### 3. å¹³å°è„šæœ¬æ¡†æ¶
- âœ… IPlatformScriptæ¥å£
- âœ… YunDing28Scriptå®ç°
- âœ… ç™»å½•æ–¹æ³•ï¼ˆJavaScriptè¾…åŠ©ï¼‰
- âœ… ä½™é¢è·å–æ–¹æ³•
- âœ… æŠ•æ³¨æ–¹æ³•æ¡†æ¶
- âœ… HandleResponseå“åº”å¤„ç†

### 4. Socketé€šä¿¡
- âœ… BsBrowserClientçš„SocketServer
- âœ… BaiShengVx3Plusçš„BrowserClient
- âœ… CommandRequest/CommandResponseæ¨¡å‹
- âœ… å‘½ä»¤è·¯ç”±ï¼ˆlogin, getbalance, placebetï¼‰

### 5. é…ç½®ç®¡ç†
- âœ… BetConfigæ¨¡å‹
- âœ… BetConfigManagerForm UI
- âœ… AutoBetServiceï¼ˆç®¡ç†é…ç½®å’Œæµè§ˆå™¨å®ä¾‹ï¼‰
- âœ… å¿«é€Ÿè®¾ç½®é¢æ¿ï¼ˆé»˜è®¤é…ç½®ï¼‰

### 6. è‡ªåŠ¨åŒ–åè°ƒ
- âœ… AutoBetCoordinatorï¼ˆç›‘å¬å¼€å¥–äº‹ä»¶ï¼‰
- âœ… å°ç›˜æ—¶è‡ªåŠ¨è§¦å‘æŠ•æ³¨
- âœ… ä¸BinggoLotteryServiceé›†æˆ

### 7. æ„å»ºä¼˜åŒ–
- âœ… æ™ºèƒ½å¢é‡å¤åˆ¶ï¼ˆåªå¤åˆ¶ä»£ç æ–‡ä»¶ï¼‰
- âœ… ç‰ˆæœ¬æ£€æµ‹ï¼ˆè‡ªåŠ¨å®Œæ•´å¤åˆ¶ï¼‰
- âœ… WorkingDirectoryä¿®å¤

---

## â³ å¾…å®Œå–„åŠŸèƒ½ï¼ˆæœ€å5%ï¼‰

### 1. å¹³å°è„šæœ¬å®Œå–„ï¼ˆæœ€é‡è¦ï¼‰

**å½“å‰çŠ¶æ€**ï¼šæ¡†æ¶å·²æ­å»ºï¼Œä½†ä½¿ç”¨çš„æ˜¯JavaScript DOMæ“ä½œ

**éœ€è¦æ”¹è¿›**ï¼šå‚è€ƒF5BotV2ï¼Œä½¿ç”¨HTTPæ‹¦æˆª+ç›´æ¥POST

**å…·ä½“å·¥ä½œ**ï¼š
1. åˆ†æçœŸå®ç½‘ç«™APIï¼ˆäº‘é¡¶28ã€æµ·å³¡28ç­‰ï¼‰
2. æ›´æ–° `HandleResponse` æ‹¦æˆªToken/Session
3. æ›´æ–° `PlaceBetAsync` ä½¿ç”¨ HttpClient ç›´æ¥POST
4. æ·»åŠ é”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘

**å‚è€ƒæ–‡æ¡£**ï¼š`ğŸ“å®Œå–„å¹³å°è„šæœ¬æŒ‡å—.md`

---

### 2. å®Œæ•´æµç¨‹æµ‹è¯•

**æµ‹è¯•åœºæ™¯**ï¼š
1. âœ… å¯åŠ¨æµè§ˆå™¨å®¢æˆ·ç«¯
2. â³ ç™»å½•ï¼ˆæ‰‹åŠ¨æˆ–è‡ªåŠ¨ï¼‰
3. â³ è·å–ä½™é¢
4. â³ å‘é€æŠ•æ³¨å‘½ä»¤
5. â³ æ¥æ”¶æŠ•æ³¨ç»“æœ
6. â³ éªŒè¯ä½™é¢å˜åŒ–

---

### 3. UIä¼˜åŒ–

**BsBrowserClientéœ€è¦æ·»åŠ **ï¼š
- æ—¥å¿—é¢æ¿ï¼ˆListBoxæ˜¾ç¤ºæ‹¦æˆªæ—¥å¿—ï¼‰
- ä½™é¢æ˜¾ç¤º
- è¿æ¥çŠ¶æ€æ˜¾ç¤º

**VxMainå·²å®Œæˆ**ï¼š
- âœ… å¿«é€Ÿè®¾ç½®é¢æ¿ï¼ˆç›˜å£ã€è´¦å·ã€å¯†ç ã€å¯ç”¨å¼€å…³ï¼‰
- âœ… é…ç½®ç®¡ç†å™¨æŒ‰é’®
- âœ… å¯åŠ¨æµè§ˆå™¨æŒ‰é’®

---

## ğŸ“Š å®Œæˆåº¦ç»Ÿè®¡

| æ¨¡å— | å®Œæˆåº¦ | è¯´æ˜ |
|------|--------|------|
| **æµè§ˆå™¨å¼•æ“** | âœ… 100% | WebView2å®Œå…¨æ›¿ä»£CefSharp |
| **HTTPæ‹¦æˆª** | âœ… 100% | åŠŸèƒ½ä¸F5BotV2ä¸€è‡´ |
| **Socketé€šä¿¡** | âœ… 100% | åŒå‘é€šä¿¡æ­£å¸¸ |
| **é…ç½®ç®¡ç†** | âœ… 100% | UIå’Œé€»è¾‘éƒ½å®Œæˆ |
| **è‡ªåŠ¨åè°ƒ** | âœ… 100% | ç›‘å¬å¼€å¥–ï¼Œè§¦å‘æŠ•æ³¨ |
| **å¹³å°è„šæœ¬** | â³ 80% | æ¡†æ¶å®Œæˆï¼Œéœ€è¦çœŸå®API |
| **æµç¨‹æµ‹è¯•** | â³ 60% | åŸºç¡€åŠŸèƒ½å¯æµ‹ï¼Œéœ€çœŸå®ç¯å¢ƒ |
| **UIä¼˜åŒ–** | â³ 90% | ä¸»è¦åŠŸèƒ½å®Œæˆï¼Œç»†èŠ‚å¾…å®Œå–„ |
| **æ€»ä½“** | âœ… **95%** | æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œå¾…å®æˆ˜æµ‹è¯• |

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### ä¸F5BotV2å¯¹æ¯”

| ç‰¹æ€§ | F5BotV2 | BaiShengVx3Plus | æ”¹è¿› |
|------|---------|-----------------|------|
| **æµè§ˆå™¨** | CefSharp 120 | WebView2 | âœ… ä½“ç§¯â†“95% |
| **æ¡†æ¶** | .NET Framework 4.8 | .NET 8 | âœ… ç°ä»£åŒ– |
| **æ¶æ„** | åµŒå…¥å¼ | ç‹¬ç«‹è¿›ç¨‹ | âœ… éš”ç¦»æ€§ |
| **é€šä¿¡** | ç›´æ¥è°ƒç”¨ | Socket | âœ… çµæ´»æ€§ |
| **é…ç½®** | ç¡¬ç¼–ç  | é…ç½®é©±åŠ¨ | âœ… æ˜“æ‰©å±• |
| **å¤šå®ä¾‹** | ä¸æ”¯æŒ | æ”¯æŒ | âœ… å¹¶å‘ |
| **æ‹¦æˆª** | CefSharp | DevTools Protocol | âœ… æ ‡å‡†åŒ– |

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶æ¸…å•

### BsBrowserClientï¼ˆç‹¬ç«‹æµè§ˆå™¨å®¢æˆ·ç«¯ï¼‰

```
BsBrowserClient/
â”œâ”€â”€ Form1.cs                              // ä¸»çª—å£
â”œâ”€â”€ Form1.Designer.cs                     // UIè®¾è®¡
â”œâ”€â”€ Program.cs                            // å…¥å£ç‚¹ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ CommandRequest.cs                 // Socketå‘½ä»¤è¯·æ±‚
â”‚   â”œâ”€â”€ CommandResponse.cs                // Socketå‘½ä»¤å“åº”
â”‚   â””â”€â”€ BetOrder.cs                       // æŠ•æ³¨è®¢å•
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ SocketServer.cs                   // SocketæœåŠ¡å™¨
â”‚   â””â”€â”€ WebView2ResourceHandler.cs        // HTTPæ‹¦æˆªå™¨ï¼ˆæ ¸å¿ƒï¼‰
â””â”€â”€ PlatformScripts/
    â”œâ”€â”€ IPlatformScript.cs                // å¹³å°æ¥å£
    â””â”€â”€ YunDing28Script.cs                // äº‘é¡¶28å®ç°
```

### BaiShengVx3Plusï¼ˆä¸»ç¨‹åºï¼‰

```
BaiShengVx3Plus/
â”œâ”€â”€ Models/AutoBet/
â”‚   â”œâ”€â”€ BetConfig.cs                      // æŠ•æ³¨é…ç½®
â”‚   â”œâ”€â”€ BetOrder.cs                       // æŠ•æ³¨è®¢å•
â”‚   â””â”€â”€ BetOrderRecord.cs                 // æŠ•æ³¨è®°å½•
â”œâ”€â”€ Services/AutoBet/
â”‚   â”œâ”€â”€ AutoBetService.cs                 // æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ AutoBetCoordinator.cs             // è‡ªåŠ¨åŒ–åè°ƒå™¨
â”‚   â””â”€â”€ BrowserClient.cs                  // æµè§ˆå™¨å®¢æˆ·ç«¯åŒ…è£…
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ VxMain.cs                         // ä¸»çª—å£ï¼ˆå¿«é€Ÿè®¾ç½®ï¼‰
â”‚   â””â”€â”€ AutoBet/
â”‚       â””â”€â”€ BetConfigManagerForm.cs       // é…ç½®ç®¡ç†å™¨
â””â”€â”€ 0-èµ„æ–™/
    â”œâ”€â”€ ğŸ‰WebView2æ–¹æ¡ˆå®æ–½å®Œæˆ.md
    â”œâ”€â”€ ğŸ“å®Œå–„å¹³å°è„šæœ¬æŒ‡å—.md
    â””â”€â”€ ğŸŠè‡ªåŠ¨æŠ•æ³¨ç³»ç»Ÿ-WebView2æ–¹æ¡ˆå®Œæˆ95%.md
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ä¼˜å…ˆçº§1ï¼šå®Œå–„å¹³å°è„šæœ¬ï¼ˆP0ï¼‰

1. é€‰æ‹©æµ‹è¯•å¹³å°ï¼ˆäº‘é¡¶28æµ‹è¯•ç«™ï¼‰
2. ä½¿ç”¨Chrome DevToolsåˆ†æAPI
   - ç™»å½•æ¥å£
   - æŠ•æ³¨æ¥å£
   - ä½™é¢æ¥å£
3. æ›´æ–°YunDing28Script
   - HandleResponseæ‹¦æˆªToken
   - PlaceBetAsyncä½¿ç”¨HttpClient
4. æµ‹è¯•å®Œæ•´æµç¨‹

**é¢„è®¡æ—¶é—´**ï¼š2-3å°æ—¶

---

### ä¼˜å…ˆçº§2ï¼šå®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆP1ï¼‰

1. å¯åŠ¨BsBrowserClient
2. æ‰‹åŠ¨ç™»å½•ï¼ˆæˆ–è‡ªåŠ¨å¡«å……ï¼‰
3. ä»ä¸»ç¨‹åºå‘é€æŠ•æ³¨å‘½ä»¤
4. éªŒè¯æŠ•æ³¨æˆåŠŸ
5. éªŒè¯ä½™é¢å˜åŒ–

**é¢„è®¡æ—¶é—´**ï¼š1å°æ—¶

---

### ä¼˜å…ˆçº§3ï¼šUIä¼˜åŒ–ï¼ˆP2ï¼‰

1. BsBrowserClientæ·»åŠ æ—¥å¿—é¢æ¿
2. æ˜¾ç¤ºå®æ—¶ä½™é¢
3. æ˜¾ç¤ºè¿æ¥çŠ¶æ€
4. ç¾åŒ–ç•Œé¢

**é¢„è®¡æ—¶é—´**ï¼š1-2å°æ—¶

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### 1. å¯åŠ¨æµè§ˆå™¨

```csharp
// ä¸»ç¨‹åºä¸­
var browserClient = new BrowserClient("default", 9527);
await browserClient.StartAsync();
// è‡ªåŠ¨å¯åŠ¨ BsBrowserClient.exe --config-id default --port 9527 --platform YunDing28 --url https://yd28.vip
```

### 2. å‘é€ç™»å½•å‘½ä»¤

```csharp
var loginCommand = new CommandRequest
{
    Command = "login",
    Data = new { username = "test", password = "123456" }
};

var response = await browserClient.SendCommandAsync(loginCommand);
// BsBrowserClient ä¼šå¡«å……è¡¨å•å¹¶ç­‰å¾…ç”¨æˆ·ç‚¹å‡»ç™»å½•
// æˆ–è€…è‡ªåŠ¨POSTåˆ°ç™»å½•API
```

### 3. è‡ªåŠ¨æŠ•æ³¨

```csharp
// AutoBetCoordinator ç›‘å¬å°ç›˜äº‹ä»¶
_lotteryService.StatusChanged += (s, e) =>
{
    if (e.NewStatus == BinggoLotteryStatus.å³å°†å°ç›˜)
    {
        var config = _autoBetService.GetConfig("default");
        if (config.Enabled)
        {
            // å‘é€æŠ•æ³¨å‘½ä»¤
            var betOrder = new BetOrder
            {
                IssueId = e.IssueId.ToString(),
                PlayType = "å¤§å°",
                BetContent = "å¤§",
                Amount = config.BetAmount
            };
            
            await _autoBetService.PlaceBetAsync(config.Id, betOrder);
        }
    }
};
```

### 4. æ¥æ”¶æŠ•æ³¨ç»“æœ

```csharp
// BsBrowserClient çš„ HandleResponse ä¼šæ‹¦æˆªæŠ•æ³¨å“åº”
if (response.Url.Contains("/api/bet/place"))
{
    var json = JObject.Parse(response.Context);
    var orderId = json["data"]?["orderId"]?.ToString();
    
    // é€šè¿‡Socketå‘é€ç»™ä¸»ç¨‹åº
    _socketServer.SendResponse(new CommandResponse
    {
        ConfigId = _configId,
        Success = true,
        Message = $"æŠ•æ³¨æˆåŠŸ: {orderId}",
        Data = new { orderId, balance = json["data"]?["balance"] }
    });
}
```

---

## âœ… æˆæœæ€»ç»“

1. âœ… **æŠ€æœ¯æ ˆå‡çº§**ï¼šCefSharp â†’ WebView2ï¼Œä½“ç§¯â†“95%
2. âœ… **æ¶æ„ä¼˜åŒ–**ï¼šç‹¬ç«‹è¿›ç¨‹ï¼ŒSocketé€šä¿¡
3. âœ… **åŠŸèƒ½å¯¹ç­‰**ï¼šHTTPæ‹¦æˆªä¸F5BotV2ä¸€è‡´
4. âœ… **é…ç½®é©±åŠ¨**ï¼šæ˜“æ‰©å±•ï¼Œæ”¯æŒå¤šå®ä¾‹
5. âœ… **è‡ªåŠ¨åŒ–**ï¼šç›‘å¬å¼€å¥–ï¼Œè‡ªåŠ¨æŠ•æ³¨
6. âœ… **UIå®Œå–„**ï¼šå¿«é€Ÿè®¾ç½®+é…ç½®ç®¡ç†å™¨

---

## ğŸ‰ ç»“è®º

**95%çš„æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼**

å‰©ä½™5%ä¸»è¦æ˜¯ï¼š
- å®Œå–„å¹³å°è„šæœ¬çš„çœŸå®APIè°ƒç”¨
- å®Œæ•´æµç¨‹æµ‹è¯•
- ç»†èŠ‚ä¼˜åŒ–

è¿™äº›å·¥ä½œéœ€è¦çœŸå®çš„æµ‹è¯•ç¯å¢ƒå’ŒAPIåˆ†æï¼Œä½†æ¶æ„å’Œæ¡†æ¶å·²ç»å®Œå…¨å°±ç»ªã€‚

ä¸€æ—¦è·å¾—çœŸå®APIä¿¡æ¯ï¼Œåªéœ€ä¿®æ”¹ `YunDing28Script` çš„å…·ä½“å®ç°ï¼Œå³å¯å®Œæ•´è¿è¡Œï¼

---

**ğŸŠ æ­å–œæ‚¨ï¼è‡ªåŠ¨æŠ•æ³¨ç³»ç»Ÿå·²åŸºæœ¬å®Œæˆï¼ğŸŠ**

