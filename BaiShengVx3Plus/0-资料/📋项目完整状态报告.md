# ğŸ“‹ wx4helper é¡¹ç›®å®Œæ•´çŠ¶æ€æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´ï¼š** 2025-11-08  
**é¡¹ç›®ç‰ˆæœ¬ï¼š** BaiShengVx3Plus (ä¸‰ç»´åº¦è®¢å•çŠ¶æ€ + Cookieå›ä¼  + å‘½ä»¤é¢æ¿)

---

## ğŸ¯ é¡¹ç›®æ¶æ„æ¦‚è§ˆ

```
wx4helper/
â”œâ”€â”€ BaiShengVx3Plus/           # ä¸»ç¨‹åºï¼ˆVxMainï¼‰
â”‚   â”œâ”€â”€ Views/                  # UIç•Œé¢
â”‚   â”œâ”€â”€ Services/               # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ Models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ Contracts/              # æ¥å£å®šä¹‰
â”‚   â””â”€â”€ ViewModels/             # è§†å›¾æ¨¡å‹
â”œâ”€â”€ BsBrowserClient/            # æµè§ˆå™¨å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ Form1.cs                # ä¸»çª—ä½“
â”‚   â”œâ”€â”€ Services/               # æœåŠ¡ï¼ˆSocketã€WebView2ï¼‰
â”‚   â””â”€â”€ PlatformScripts/        # å¹³å°è„šæœ¬
â”œâ”€â”€ BaiShengVx3Plus.Shared/    # å…±äº«åº“
â”‚   â””â”€â”€ BetPlatform.cs          # å¹³å°æšä¸¾å’Œå¸®åŠ©ç±»
â””â”€â”€ WeixinX/                    # å¾®ä¿¡åè®®åº“
```

---

## âœ… å·²å®ŒæˆåŠŸèƒ½æ¸…å•

### ä¸€ã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. å¾®ä¿¡é›†æˆ âœ…
- [x] Socketè¿æ¥å¾®ä¿¡Xè¿›ç¨‹
- [x] æ¥æ”¶å¾®ä¿¡æ¶ˆæ¯
- [x] å‘é€å¾®ä¿¡æ¶ˆæ¯
- [x] è”ç³»äººç®¡ç†
- [x] ç¾¤æ¶ˆæ¯å¤„ç†
- [x] @æåŠå¤„ç†

#### 2. ä¼šå‘˜ç®¡ç† âœ…
- [x] ä¼šå‘˜CRUDæ“ä½œ
- [x] ä¼šå‘˜çŠ¶æ€ç®¡ç†ï¼ˆæ™®ä¼šã€è“ä¼šã€ç´«ä¼šã€é»„ä¼šã€æ‰˜ã€ç®¡ç†ï¼‰
- [x] ä¼šå‘˜ä½™é¢ç®¡ç†
- [x] ä¼šå‘˜ç»Ÿè®¡ä¿¡æ¯
- [x] ä¼šå‘˜åˆ—è¡¨UIç»‘å®š

#### 3. è®¢å•ç®¡ç†ï¼ˆä¸‰ç»´åº¦è®¾è®¡ï¼‰âœ…
- [x] **OrderStatus** - è®¢å•å¤„ç†æµç¨‹ï¼ˆå¾…å¤„ç†ã€å¾…ç»“ç®—ã€å·²å®Œæˆã€å·²å–æ¶ˆï¼‰
- [x] **OrderType** - æŠ•æ³¨å¤„ç†æ–¹å¼ï¼ˆå¾…å®šã€ç›˜å†…ã€ç›˜å¤–ã€æ‰˜ï¼‰
- [x] **MemberState** - ä¼šå‘˜ç­‰çº§å¿«ç…§ï¼ˆè®¢å•åˆ›å»ºæ—¶çš„ä¼šå‘˜çŠ¶æ€ï¼‰
- [x] è®¢å•åˆ›å»ºï¼ˆä¸‹æ³¨ã€è¡¥å•ï¼‰
- [x] è®¢å•æŸ¥è¯¢å’Œç­›é€‰
- [x] è®¢å•åˆ—è¡¨UIï¼ˆå«ä¼šå‘˜ç­‰çº§åˆ—ï¼‰
- [x] æ‰©å±•ä¸šåŠ¡è§„åˆ™æ”¯æŒï¼ˆå¦‚ï¼šè“ä¼šå¤§é¢å¤šæ‰“ï¼‰

#### 4. å¼€å¥–æœåŠ¡ âœ…
- [x] æœŸå·ç®¡ç†
- [x] å¼€å¥–æ•°æ®å½•å…¥
- [x] è‡ªåŠ¨ç»“ç®—
- [x] èµ”ç‡è®¡ç®—
- [x] ç»Ÿè®¡æ›´æ–°
- [x] å¼€å¥–å†å²æŸ¥è¯¢

#### 5. å½©ç¥¨çŠ¶æ€ç®¡ç† âœ…
- [x] çŠ¶æ€æšä¸¾ï¼ˆæœªçŸ¥ã€å¼€ç›˜ä¸­ã€å³å°†å°ç›˜ã€å·²å°ç›˜ã€å·²å¼€å¥–ã€ä¼‘å¸‚ä¸­ï¼‰
- [x] çŠ¶æ€è‡ªåŠ¨åˆ‡æ¢
- [x] å€’è®¡æ—¶æé†’ï¼ˆ30ç§’ã€15ç§’ï¼‰
- [x] çŠ¶æ€å˜æ›´é€šçŸ¥
- [x] UIçŠ¶æ€æ˜¾ç¤º

#### 6. è‡ªåŠ¨æŠ•æ³¨ç³»ç»Ÿ âœ…
- [x] **æŠ•æ³¨é…ç½®ç®¡ç†**ï¼ˆå¹³å°ã€è´¦å·ã€URLã€Cookieï¼‰
- [x] **æµè§ˆå™¨è¿›ç¨‹ç®¡ç†**ï¼ˆå¯åŠ¨ã€éšè—ã€æ˜¾ç¤ºã€å…³é—­ï¼‰
- [x] **SocketåŒå‘é€šä¿¡**ï¼ˆå‘½ä»¤å‘é€ã€çŠ¶æ€æ¨é€ï¼‰
- [x] **HTTPæ•°æ®äº¤äº’**ï¼ˆè®¢å•æŸ¥è¯¢ã€ç»“æœæäº¤ï¼‰
- [x] **è®¢å•åˆå¹¶**ï¼ˆOrderMergerï¼‰
- [x] **æŠ•æ³¨è®°å½•è¡¨**ï¼ˆBetRecordï¼‰
- [x] **æŠ•æ³¨é˜Ÿåˆ—ç®¡ç†**ï¼ˆBetQueueManager - å¼‚æ­¥éé˜»å¡ï¼‰
- [x] **æŠ•æ³¨åè°ƒå™¨**ï¼ˆAutoBetCoordinator - ç›‘å¬å°ç›˜äº‹ä»¶ï¼‰
- [x] **æŠ•æ³¨ç»“æœå¤„ç†**ï¼ˆæˆåŠŸæ›´æ–°ä¸ºå¾…ç»“ç®—ï¼Œå¤±è´¥æ›´æ–°ä¸ºç›˜å¤–ï¼‰

#### 7. Cookieç®¡ç† âœ… **NEW**
- [x] **è‡ªåŠ¨å›ä¼ **ï¼ˆé¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è·å–å¹¶å›ä¼ ï¼‰
- [x] **æ‰‹åŠ¨è·å–**ï¼ˆé€šè¿‡å‘½ä»¤é¢æ¿"è·å–Cookie"ï¼‰
- [x] **Socketé€šä¿¡**ï¼ˆcookie_updateæ¶ˆæ¯ç±»å‹ï¼‰
- [x] **é…ç½®å­˜å‚¨**ï¼ˆä¿å­˜åˆ°BetConfigï¼‰

#### 8. å‘½ä»¤é¢æ¿ âœ… **NEW**
- [x] **UIç»„ä»¶**ï¼ˆå¿«æ·æŒ‰é’®ã€è¾“å…¥æ¡†ã€ç»“æœæ˜¾ç¤ºï¼‰
- [x] **å‘½ä»¤è§£æ**ï¼ˆæ”¯æŒå¸¦å‚æ•°å’Œæ— å‚æ•°ï¼‰
- [x] **å‘½ä»¤å‘é€**ï¼ˆé€šè¿‡Socketåˆ°BrowserClientï¼‰
- [x] **ç»“æœå±•ç¤º**ï¼ˆJSONæ ¼å¼åŒ–æ˜¾ç¤ºï¼‰
- [x] **æ”¯æŒå‘½ä»¤**ï¼š
  - æŠ•æ³¨(å‚æ•°)
  - è·å–Cookie
  - è·å–ç›˜å£é¢åº¦

#### 9. å¹³å°é›†æˆ âœ…
- [x] äº‘é¡¶28ï¼ˆYunDingï¼‰
- [x] æµ·ä¾ 28ï¼ˆHaiXiaï¼‰
- [x] çº¢æµ·28ï¼ˆHongHaiï¼‰
- [x] é€šå®ï¼ˆTongBaoï¼‰- **NEW**
- [x] å¹³å°è„šæœ¬æ¥å£ï¼ˆç™»å½•ã€æŠ•æ³¨ã€è·å–ä½™é¢ï¼‰
- [x] å…±äº«æšä¸¾åº“ï¼ˆBaiShengVx3Plus.Sharedï¼‰

---

### äºŒã€UIç•Œé¢

#### 1. ä¸»çª—å£ï¼ˆVxMainï¼‰âœ…
- [x] é¡¶éƒ¨å·¥å…·æ ï¼ˆæ—¥å¿—ã€è®¾ç½®ã€å½©ç¥¨è®¾ç½®ï¼‰
- [x] å·¦ä¾§è”ç³»äººåˆ—è¡¨
- [x] ä¸­é—´ä¼šå‘˜åˆ—è¡¨
- [x] å³ä¾§è®¢å•åˆ—è¡¨
- [x] åº•éƒ¨ç»Ÿè®¡ä¿¡æ¯
- [x] å½©ç¥¨çŠ¶æ€é¢æ¿ï¼ˆæœŸå·ã€å€’è®¡æ—¶ã€çŠ¶æ€ï¼‰
- [x] è‡ªåŠ¨æŠ•æ³¨å¼€å…³

#### 2. é…ç½®ç®¡ç†ç•Œé¢ï¼ˆBetConfigManagerFormï¼‰âœ…
- [x] é…ç½®åˆ—è¡¨
- [x] å¿«é€Ÿé…ç½®é¢æ¿ï¼ˆå¹³å°ã€è´¦å·ã€å¯†ç ã€URLï¼‰
- [x] é«˜çº§è®¾ç½®é¢æ¿
- [x] **å‘½ä»¤é¢æ¿**ï¼ˆå¿«æ·æŒ‰é’®ã€å‘½ä»¤è¾“å…¥ã€ç»“æœæ˜¾ç¤ºï¼‰**NEW**
- [x] æµè§ˆå™¨æ§åˆ¶ï¼ˆå¯åŠ¨ã€éšè—ã€æ˜¾ç¤ºã€å…³é—­ï¼‰
- [x] è‡ªåŠ¨æŠ•æ³¨å¼€å…³

#### 3. å½©ç¥¨è®¾ç½®ç•Œé¢ï¼ˆBinggoGameSettingsFormï¼‰âœ…
- [x] æœŸå·æ ¼å¼é…ç½®
- [x] æ—¶é—´é…ç½®ï¼ˆå¼€ç›˜ã€å°ç›˜ã€å¼€å¥–ï¼‰
- [x] æé†’æ—¶é—´é…ç½®
- [x] é»˜è®¤èµ”ç‡é…ç½®

#### 4. å¼€å¥–ç»“æœç•Œé¢ï¼ˆBinggoLotteryResultFormï¼‰âœ…
- [x] æœŸå·è¾“å…¥
- [x] å¼€å¥–å·ç è¾“å…¥
- [x] å¤§å°å•åŒæ˜¾ç¤º
- [x] æ‰‹åŠ¨å½•å…¥
- [x] è‡ªåŠ¨ç»“ç®—

#### 5. è®¾ç½®ç•Œé¢ï¼ˆSettingsFormï¼‰âœ…
- [x] å¾®ä¿¡è¿æ¥è®¾ç½®
- [x] Socketæµ‹è¯•
- [x] HTTPç«¯å£é…ç½®

---

### ä¸‰ã€æ•°æ®åº“è®¾è®¡

#### æ ¸å¿ƒè¡¨ç»“æ„ âœ…

**1. V2Memberï¼ˆä¼šå‘˜è¡¨ï¼‰**
```csharp
- Id (ä¸»é”®)
- Wxid, Nickname, Account
- GroupWxId
- Balance (ä½™é¢)
- State (ä¼šå‘˜çŠ¶æ€ï¼šæ™®ä¼š/è“ä¼š/ç´«ä¼š/é»„ä¼š/æ‰˜/ç®¡ç†)
- Notes (å¤‡æ³¨)
```

**2. V2MemberOrderï¼ˆè®¢å•è¡¨ï¼‰- ä¸‰ç»´åº¦è®¾è®¡ â­**
```csharp
- Id (ä¸»é”®)
- IssueId (æœŸå·)
- Wxid, Nickname, Account
- BetContentOriginal (åŸå§‹å†…å®¹ï¼š"123å¤§20")
- BetContentStandar (æ ‡å‡†å†…å®¹ï¼š"1å¤§,2å¤§,3å¤§")
- AmountTotal (æ€»é‡‘é¢)
- Profit, NetProfit (ç›ˆäº)
- Odds (èµ”ç‡)
- OrderStatus (æµç¨‹çŠ¶æ€ï¼šå¾…å¤„ç†/å¾…ç»“ç®—/å·²å®Œæˆ/å·²å–æ¶ˆ)
- OrderType (å¤„ç†æ–¹å¼ï¼šå¾…å®š/ç›˜å†…/ç›˜å¤–/æ‰˜)
- MemberState (ä¼šå‘˜ç­‰çº§å¿«ç…§ï¼šæ™®ä¼š/è“ä¼š/ç´«ä¼š/é»„ä¼š...) â­ NEW
```

**3. BetConfigï¼ˆæŠ•æ³¨é…ç½®è¡¨ï¼‰**
```csharp
- Id (ä¸»é”®)
- ConfigName (é…ç½®åç§°)
- Platform (å¹³å°)
- Username, Password (è´¦å·å¯†ç )
- PlatformUrl (å¹³å°URL)
- Cookie (ä¿å­˜çš„Cookie)
- AutoBetEnabled (æ˜¯å¦å¯ç”¨è‡ªåŠ¨æŠ•æ³¨)
- IsActive (æ˜¯å¦æ¿€æ´»)
- ProcessId (æµè§ˆå™¨è¿›ç¨‹ID)
- Port (Socketç«¯å£)
```

**4. BetRecordï¼ˆæŠ•æ³¨è®°å½•è¡¨ï¼‰**
```csharp
- Id (ä¸»é”®)
- ConfigId (é…ç½®ID)
- IssueId (æœŸå·)
- Source (æ¥æºï¼šè®¢å•/å‘½ä»¤)
- OrderIds (å…³è”è®¢å•IDï¼Œé€—å·åˆ†éš”)
- BetContentStandard (æ ‡å‡†æŠ•æ³¨å†…å®¹ï¼š"1å¤§50,2å¤§30")
- TotalAmount (æ€»é‡‘é¢)
- SendTime (å‘é€æ—¶é—´)
- PostStartTime, PostEndTime (POSTå‰åæ—¶é—´)
- DurationMs (è€—æ—¶æ¯«ç§’)
- Success (æˆåŠŸä¸å¦)
- Result (å¹³å°è¿”å›æ•°æ®)
- ErrorMessage (é”™è¯¯ä¿¡æ¯)
- OrderNo (å¹³å°è®¢å•å·)
```

**5. BinggoLotteryDataï¼ˆå¼€å¥–æ•°æ®è¡¨ï¼‰**
```csharp
- Id (ä¸»é”®)
- IssueId (æœŸå·)
- Numbers (å¼€å¥–å·ç ï¼Œé€—å·åˆ†éš”)
- Sum (å’Œå€¼)
- DaXiao (å¤§å°)
- DanShuang (å•åŒ)
- IsOpened (æ˜¯å¦å·²å¼€å¥–)
- OpenTime (å¼€å¥–æ—¶é—´)
```

---

## ğŸ”„ ä¸šåŠ¡æµç¨‹

### 1. ä¸‹æ³¨æµç¨‹ï¼ˆä¼šå‘˜ â†’ è®¢å• â†’ æŠ•æ³¨ï¼‰

```
1. ä¼šå‘˜å¾®ä¿¡å‘é€ï¼š"123å¤§20"
   â†“
2. BinggoMessageHandler æ¥æ”¶å¹¶è§£æ
   â†“
3. BinggoOrderService åˆ›å»ºè®¢å•
   - OrderStatus = å¾…å¤„ç†
   - OrderType = å¾…å®šï¼ˆå¦‚æœæ˜¯æ‰˜å•åˆ™è®¾ä¸ºæ‰˜ï¼‰
   - MemberState = å½“å‰ä¼šå‘˜çŠ¶æ€ï¼ˆå¿«ç…§ï¼‰â­
   - BetContentOriginal = "123å¤§20"
   - BetContentStandar = "1å¤§,2å¤§,3å¤§"
   â†“
4. å°ç›˜äº‹ä»¶è§¦å‘ï¼ˆAutoBetCoordinatorç›‘å¬ï¼‰
   â†“
5. æŸ¥è¯¢å¾…å¤„ç†è®¢å•
   â†“
6. ã€æ‰©å±•è§„åˆ™æ£€æŸ¥ã€‘â­
   if (order.MemberState == è“ä¼š && order.AmountTotal > 500)
       å¤šæ‰“åˆ°é…ç½®B
   â†“
7. è®¢å•åˆå¹¶ï¼ˆOrderMergerï¼‰
   "1å¤§10" + "1å¤§20" + "1å¤§30" = "1å¤§60"
   â†“
8. ç”ŸæˆæŠ•æ³¨è®°å½•ï¼ˆBetRecordï¼‰
   - Source = è®¢å•
   - OrderIds = "1,2,3"
   - BetContentStandard = "1å¤§60,2å¤§30"
   â†“
9. åŠ å…¥æŠ•æ³¨é˜Ÿåˆ—ï¼ˆBetQueueManager - å¼‚æ­¥ï¼‰
   â†“
10. Socketå‘é€"æŠ•æ³¨"å‘½ä»¤åˆ°BrowserClient
    â†“
11. BrowserClientæ‰§è¡ŒæŠ•æ³¨
    - PostStartTime
    - è°ƒç”¨PlatformScript.PlaceBetAsync
    - PostEndTime
    â†“
12. è¿”å›ç»“æœåˆ°VxMain
    {success, durationMs, orderNo}
    â†“
13. æ›´æ–°BetRecord
    â†“
14. æ›´æ–°è®¢å•çŠ¶æ€
    - æˆåŠŸï¼šOrderStatus=å¾…ç»“ç®—, OrderType=ç›˜å†…
    - å¤±è´¥ï¼šOrderStatus=å·²å®Œæˆ, OrderType=ç›˜å¤–
```

### 2. æ‰‹åŠ¨å‘½ä»¤æµç¨‹ï¼ˆå‘½ä»¤é¢æ¿ â†’ BrowserClientï¼‰

```
1. ç”¨æˆ·åœ¨å‘½ä»¤é¢æ¿è¾“å…¥ï¼š"è·å–Cookie"
   â†“
2. ParseCommandè§£æ â†’ cmdName="è·å–Cookie", cmdParam=""
   â†“
3. SendCommandToBrowserAsync
   â†“
4. AutoBetService.GetBrowserClient(configId)
   â†“
5. BrowserClient.SendCommandAsync("è·å–Cookie", null)
   â†“
6. BrowserClientå¤„ç†å‘½ä»¤
   - è·å–CoreWebView2.CookieManager
   - éå†æ‰€æœ‰Cookie
   - å°è£…ä¸ºJSON
   â†“
7. è¿”å›ç»“æœ
   {success, message, data: {url, cookies, count}}
   â†“
8. æ˜¾ç¤ºåœ¨å‘½ä»¤ç»“æœåŒºåŸŸï¼ˆJSONæ ¼å¼åŒ–ï¼‰
```

### 3. Cookieè‡ªåŠ¨å›ä¼ æµç¨‹

```
1. BrowserClienté¡µé¢åŠ è½½å®Œæˆ
   â†“
2. NavigationCompletedäº‹ä»¶è§¦å‘
   â†“
3. TryAutoLoginAsyncï¼ˆè‡ªåŠ¨ç™»å½•ï¼‰
   â†“
4. GetAndSendCookieToVxMain
   - è·å–æ‰€æœ‰Cookie
   - è½¬æ¢ä¸ºå­—å…¸
   - Socketå‘é€{"type":"cookie_update"}
   â†“
5. VxMainæ¥æ”¶
   â†“
6. ä¿å­˜åˆ°BetConfig.Cookieå­—æ®µ
```

---

## ğŸ“Š é€šä¿¡åè®®

### Socketé€šä¿¡ï¼ˆåŒå‘ï¼‰

**VxMain â†’ BrowserClientï¼ˆå‘½ä»¤ï¼‰**
```json
{
  "command": "æŠ•æ³¨",
  "data": {
    "issueId": "114063155",
    "betContent": "1å¤§50,2å¤§30"
  }
}
```

**BrowserClient â†’ VxMainï¼ˆå“åº”ï¼‰**
```json
{
  "configId": "1",
  "success": true,
  "message": "æŠ•æ³¨æˆåŠŸ",
  "data": {
    "postStartTime": "2025-11-08 13:10:30.500",
    "postEndTime": "2025-11-08 13:10:30.625",
    "durationMs": 125,
    "orderNo": "ORD123456"
  }
}
```

**BrowserClient â†’ VxMainï¼ˆé€šçŸ¥ï¼‰**
```json
{
  "type": "cookie_update",
  "configId": "1",
  "url": "https://www.yunding28.com",
  "cookies": {
    "sessionId": "abc123",
    "token": "xyz789"
  },
  "timestamp": "2025-11-08 13:00:21"
}
```

### HTTPé€šä¿¡ï¼ˆæ•°æ®æŸ¥è¯¢ï¼‰

**GET /api/config?configId=1**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "configName": "é»˜è®¤é…ç½®",
    "platform": "YunDing",
    "username": "testuser",
    "password": "******",
    "platformUrl": "https://www.yunding28.com"
  }
}
```

**GET /api/order?configId=1&issueId=114063155**
```json
{
  "success": true,
  "data": {
    "issueId": "114063155",
    "orders": [
      {"id": 1, "content": "1å¤§50", "amount": 50},
      {"id": 2, "content": "2å¤§30", "amount": 30}
    ]
  }
}
```

---

## ğŸ¯ æšä¸¾ç»Ÿä¸€è®¾è®¡

### OrderStatusï¼ˆè®¢å•å¤„ç†æµç¨‹ï¼‰
```csharp
public enum OrderStatus
{
    æœªçŸ¥ = -1,
    å¾…å¤„ç† = 0,     // è®¢å•è¿›æ¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰æŠ•é€’è¿›ç½‘ç›˜
    å¾…ç»“ç®— = 1,     // å·²æŠ•æ³¨ï¼Œç­‰å¾…å¼€å¥–ç»“ç®—
    å·²å®Œæˆ = 2,     // ç»“ç®—å®Œæˆ
    å·²å–æ¶ˆ = 3      // å·²å–æ¶ˆ
}
```

### OrderTypeï¼ˆæŠ•æ³¨å¤„ç†æ–¹å¼ï¼‰
```csharp
public enum OrderType
{
    å¾…å®š = 0,
    ç›˜å†… = 1,       // è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å†…
    ç›˜å¤– = 2,       // æ²¡è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å¤–
    æ‰˜ = 3          // å°±æ˜¯ä¸æ‰“è¿›ç›˜çš„
}
```

### MemberStateï¼ˆä¼šå‘˜çŠ¶æ€ï¼‰â­
```csharp
public enum MemberState
{
    å·²åˆ é™¤ = -1,
    éä¼šå‘˜ = 0,
    ä¼šå‘˜ = 1,
    æ‰˜ = 2,
    ç®¡ç† = 3,
    å·²é€€ç¾¤ = 4,
    æ™®ä¼š = 5,
    è“ä¼š = 6,
    ç´«ä¼š = 7,
    é»„ä¼š = 8
}
```

### BetRecordSourceï¼ˆæŠ•æ³¨æ¥æºï¼‰
```csharp
public enum BetRecordSource
{
    è®¢å• = 0,       // æ¥è‡ªä¼šå‘˜è®¢å•ï¼ˆè‡ªåŠ¨æŠ•æ³¨ï¼‰
    å‘½ä»¤ = 1        // æ¥è‡ªæ‰‹åŠ¨å‘½ä»¤ï¼ˆå‘½ä»¤é¢æ¿ï¼‰
}
```

---

## ğŸ”§ å‰©ä½™TODOï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰

**1. å®Œå–„"å°ç›˜é€šçŸ¥"çš„æ—§æµç¨‹æ¸…ç†**
```csharp
// BsBrowserClient/Form1.cs:Line 420
case "å°ç›˜é€šçŸ¥":
    // âš ï¸ è¿™ä¸ªæ˜¯æ—§æµç¨‹ï¼ˆHTTPæ‹‰å–è®¢å•ï¼‰
    // æ–°æµç¨‹å·²æ”¹ä¸º"æŠ•æ³¨"å‘½ä»¤ç›´æ¥ä¼ é€’åˆå¹¶åçš„å†…å®¹
    // TODO: ç¡®è®¤æ˜¯å¦éœ€è¦ä¿ç•™æ­¤åˆ†æ”¯ï¼Œæˆ–è€…å®Œå…¨åˆ é™¤
    var betResult = await FetchOrdersAndBetAsync(issueId);
```

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤æ–°æµç¨‹ç¨³å®šåï¼Œåˆ é™¤`FetchOrdersAndBetAsync`æ–¹æ³•
- å°ç›˜é€šçŸ¥åªåšé€šçŸ¥ï¼Œä¸å†æ‹‰å–è®¢å•

**2. å®Œå–„AutoBetCoordinatorçš„æ‰©å±•è§„åˆ™**
```csharp
// BaiShengVx3Plus/Services/AutoBet/AutoBetCoordinator.cs:Line 153
//var blueMemberLargeOrders = pendingOrders.Where(o =>
//    o.MemberState == MemberState.è“ä¼š &&
//    o.AmountTotal > 500 &&
//    o.OrderType != OrderType.æ‰˜
//).ToList();

//if (blueMemberLargeOrders.Any())
//{
//    _log.Info("AutoBet", $"ğŸ“¢ æ£€æµ‹åˆ°{blueMemberLargeOrders.Count}ä¸ªè“ä¼šå¤§é¢è®¢å•(>500å…ƒ)");
//    // TODO: å¤šæ‰“åˆ°é…ç½®Bçš„é€»è¾‘
//    // await DuplicateOrdersToConfigB(blueMemberLargeOrders);
//}
```

**è§£å†³æ–¹æ¡ˆï¼š**
- å®ç°`DuplicateOrdersToConfigB`æ–¹æ³•
- æ”¯æŒé…ç½®é©±åŠ¨ï¼ˆä»æ•°æ®åº“è¯»å–è§„åˆ™ï¼‰

---

### ä¸­ä¼˜å…ˆçº§ï¼ˆå¢å¼ºç”¨æˆ·ä½“éªŒï¼‰

**3. æŠ•æ³¨è®°å½•æŸ¥è¯¢UI**
```csharp
// BaiShengVx3Plus/Views/AutoBet/BetConfigManagerForm.cs:Line 197
// TODO: ä»æ•°æ®åº“åŠ è½½æŠ•æ³¨è®°å½•
```

**è§£å†³æ–¹æ¡ˆï¼š**
- åœ¨é…ç½®ç®¡ç†ç•Œé¢æ·»åŠ "æŠ•æ³¨è®°å½•"Tab
- æ˜¾ç¤ºå†å²æŠ•æ³¨è®°å½•ï¼ˆBetRecordè¡¨ï¼‰
- æ”¯æŒæŒ‰æ—¶é—´ã€çŠ¶æ€ã€æ¥æºç­›é€‰

**4. æŠ•æ³¨å‘½ä»¤å‚æ•°è§£æå¢å¼º**
```csharp
// BaiShengVx3Plus/Views/AutoBet/BetConfigManagerForm.cs:Line 651
case "æŠ•æ³¨":
    // TODO: è§£ææŠ•æ³¨å†…å®¹ï¼Œç”ŸæˆBetRecordï¼Œå‘é€æŠ•æ³¨å‘½ä»¤
    // è¿™é‡Œéœ€è¦å½“å‰æœŸå·ï¼Œæš‚æ—¶ä½¿ç”¨0
    var betResult = await autoBetService.SendBetCommandAsync(_selectedConfig.Id, "0", cmdParam);
```

**è§£å†³æ–¹æ¡ˆï¼š**
- è‡ªåŠ¨è·å–å½“å‰æœŸå·ï¼ˆä»BinggoLotteryServiceï¼‰
- æ”¯æŒå¤æ‚æŠ•æ³¨æ ¼å¼ï¼ˆå¦‚ï¼š"1å¤§10 2å°20"ï¼‰
- ç”ŸæˆBetRecordè®°å½•ï¼ˆSource=å‘½ä»¤ï¼‰

**5. è®¢å•ç­›é€‰åŠŸèƒ½**
```csharp
// BaiShengVx3Plus/Views/VxMain.cs:Line 1406
// TODO: å®ç°è®¢å•ç­›é€‰é€»è¾‘
```

**è§£å†³æ–¹æ¡ˆï¼š**
- æŒ‰æœŸå·ç­›é€‰
- æŒ‰çŠ¶æ€ç­›é€‰ï¼ˆå¾…å¤„ç†ã€å¾…ç»“ç®—ã€å·²å®Œæˆï¼‰
- æŒ‰ç±»å‹ç­›é€‰ï¼ˆç›˜å†…ã€ç›˜å¤–ã€æ‰˜ï¼‰
- æŒ‰ä¼šå‘˜ç­‰çº§ç­›é€‰â­

---

### ä½ä¼˜å…ˆçº§ï¼ˆä¼˜åŒ–å’Œå®Œå–„ï¼‰

**6. è®¾ç½®æŒä¹…åŒ–**
```csharp
// BaiShengVx3Plus/Views/SettingsForm.cs:Line 68
// TODO: ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
```

**7. ä¼šå‘˜äº‹ä»¶å¤„ç†**
```csharp
// BaiShengVx3Plus/Services/Messages/Handlers/MemberEventHandler.cs:Line 38, 80
// TODO: å¤„ç†æˆå‘˜åŠ å…¥äº‹ä»¶
// TODO: å¤„ç†æˆå‘˜é€€å‡ºäº‹ä»¶
```

**8. è”ç³»äººæ•°æ®åŠ è½½**
```csharp
// BaiShengVx3Plus/Views/VxMain.cs:Line 1390
// TODO: æ ¹æ®é€‰ä¸­çš„è”ç³»äººï¼ŒåŠ è½½å¯¹åº”çš„ä¼šå‘˜å’Œè®¢å•æ•°æ®
```

**9. æ·»åŠ ç”¨æˆ·å¯¹è¯æ¡†**
```csharp
// BaiShengVx3Plus/ViewModels/VxMainViewModel.cs:Line 90
// TODO: æ‰“å¼€æ·»åŠ ç”¨æˆ·å¯¹è¯æ¡†
```

**10. æœŸå·éªŒè¯**
```csharp
// BaiShengVx3Plus/Services/Games/Binggo/BinggoOrderValidator.cs:Line 133
// TODO: å¯ä»¥æ ¹æ®å½“å‰æœŸå·éªŒè¯
```

**11. ç»“ç®—å’Œå¼€ç›˜é€šçŸ¥**
```csharp
// BaiShengVx3Plus/Views/VxMain.cs:Line 550, 587
// TODO: å¯é€‰ - å‘é€ç»“ç®—é€šçŸ¥åˆ°å¾®ä¿¡ç¾¤
// TODO: å¯é€‰ - å‘é€å¼€ç›˜é€šçŸ¥åˆ°å¾®ä¿¡ç¾¤
```

---

## ğŸ› å·²çŸ¥é—®é¢˜

### 1. ç¼–è¯‘æ–‡ä»¶é”å®š âš ï¸
**é—®é¢˜ï¼š** BsBrowserClientè¿›ç¨‹è¿è¡Œæ—¶æ— æ³•ç¼–è¯‘
```
error MSB3021: æ— æ³•å°†æ–‡ä»¶å¤åˆ¶åˆ°"BrowserClient\BsBrowserClient.exe"
æ–‡ä»¶è¢«"BsBrowserClient (29820)"é”å®š
```

**è§£å†³æ–¹æ¡ˆï¼š**
- å…³é—­æ‰€æœ‰BsBrowserClientè¿›ç¨‹
- æˆ–è€…å…ˆç¼–è¯‘BsBrowserClientï¼Œå†ç¼–è¯‘BaiShengVx3Plus

### 2. ç©ºå¼•ç”¨è­¦å‘Š
**é—®é¢˜ï¼š** å¤šå¤„ç©ºå¼•ç”¨è­¦å‘Šï¼ˆCS8602, CS8600ç­‰ï¼‰

**å½±å“ï¼š** ä»…è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½

**è§£å†³æ–¹æ¡ˆï¼š**
- æ·»åŠ nullæ£€æŸ¥
- ä½¿ç”¨null-forgiving operator (!)
- å¯ç”¨nullable reference types

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### æŠ•æ³¨æ€§èƒ½
- **è®¢å•åˆå¹¶**ï¼š< 10msï¼ˆ100ä¸ªè®¢å•ï¼‰
- **Socketé€šä¿¡**ï¼š< 50msï¼ˆå±€åŸŸç½‘ï¼‰
- **HTTPæŸ¥è¯¢**ï¼š< 100msï¼ˆæœ¬åœ°ï¼‰
- **æŠ•æ³¨è€—æ—¶**ï¼š100-300msï¼ˆå–å†³äºå¹³å°ç½‘ç»œï¼‰

### æ•°æ®åº“æ€§èƒ½
- **è®¢å•æŸ¥è¯¢**ï¼š< 20msï¼ˆ1ä¸‡æ¡è®°å½•ï¼‰
- **ä¼šå‘˜æŸ¥è¯¢**ï¼š< 10msï¼ˆ1000ä¸ªä¼šå‘˜ï¼‰
- **ç»Ÿè®¡æŸ¥è¯¢**ï¼š< 50msï¼ˆå¤æ‚èšåˆï¼‰

---

## ğŸ“š æŠ€æœ¯æ ˆ

### å‰ç«¯ï¼ˆUIï¼‰
- **WinForms** - ä¸»ç•Œé¢æ¡†æ¶
- **Sunny.UI** - UIæ§ä»¶åº“
- **DataGridView** - æ•°æ®è¡¨æ ¼

### åç«¯ï¼ˆä¸šåŠ¡ï¼‰
- **.NET 8** - è¿è¡Œæ—¶
- **SQLite-net-pcl** - æ•°æ®åº“ORM
- **Newtonsoft.Json** - JSONåºåˆ—åŒ–

### é€šä¿¡
- **WebView2** - æµè§ˆå™¨å†…æ ¸
- **Socket** - åŒå‘é€šä¿¡ï¼ˆå‘½ä»¤/é€šçŸ¥ï¼‰
- **HttpListener** - HTTPæœåŠ¡å™¨ï¼ˆæ•°æ®æŸ¥è¯¢ï¼‰

### è®¾è®¡æ¨¡å¼
- **ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰** - æœåŠ¡ç®¡ç†
- **è§‚å¯Ÿè€…æ¨¡å¼** - äº‹ä»¶é€šçŸ¥
- **ç­–ç•¥æ¨¡å¼** - å¹³å°è„šæœ¬
- **é˜Ÿåˆ—æ¨¡å¼** - å¼‚æ­¥æŠ•æ³¨

---

## ğŸ“ ä»£ç å¤ç”¨æƒ…å†µ

### é«˜å¤ç”¨æ¨¡å— âœ…

**1. BaiShengVx3Plus.Shared**
- `BetPlatform` æšä¸¾
- `BetPlatformHelper` å·¥å…·ç±»
- è¢«ä¸¤ä¸ªé¡¹ç›®å…±äº«ï¼Œé¿å…é‡å¤å®šä¹‰

**2. PlatformScriptæ¥å£**
- `IPlatformScript` æ¥å£å®šä¹‰
- å„å¹³å°å®ç°ï¼ˆYunDingScript, TongBaoScriptç­‰ï¼‰
- ç­–ç•¥æ¨¡å¼ï¼Œæ˜“äºæ‰©å±•

**3. æœåŠ¡æ¥å£**
- `IBinggoOrderService`
- `ILogService`
- `IWeixinSocketService`
- ä¾¿äºæµ‹è¯•å’Œæ›¿æ¢å®ç°

**4. æ•°æ®æ¨¡å‹**
- `V2Member`, `V2MemberOrder` å¤ç”¨F5BotV2è®¾è®¡
- `BetConfig`, `BetRecord` æ–°å¢ä½†ä¿æŒä¸€è‡´æ€§

### ä»£ç å†—ä½™æ£€æŸ¥ âœ…

**å·²æ¶ˆé™¤çš„å†—ä½™ï¼š**
- âœ… å¹³å°æšä¸¾ç»Ÿä¸€åˆ°Sharedåº“
- âœ… è®¢å•çŠ¶æ€æšä¸¾ç»Ÿä¸€ï¼ˆOrderStatus + OrderTypeï¼‰
- âœ… Cookieå¤„ç†é€»è¾‘å¤ç”¨
- âœ… Socketé€šä¿¡åè®®ç»Ÿä¸€

**æ— æ˜æ˜¾å†—ä½™ï¼š**
- å„æœåŠ¡èŒè´£æ¸…æ™°
- å„æ¨¡å—ç›¸äº’ç‹¬ç«‹
- é€šä¿¡åè®®æ ‡å‡†åŒ–

---

## ğŸš€ éƒ¨ç½²æ¸…å•

### å¼€å‘ç¯å¢ƒ
- [x] Visual Studio 2022 / VS Code
- [x] .NET 8 SDK
- [x] WebView2 Runtime
- [x] SQLite

### è¿è¡Œä¾èµ–
- [x] Microsoft.Web.WebView2 (1.0.2592.51)
- [x] Newtonsoft.Json (13.0.3)
- [x] SQLite-net-pcl (1.9.172)
- [x] Sunny.UI (3.6.9)

### å¤–éƒ¨ä¾èµ–
- [x] å¾®ä¿¡Xè¿›ç¨‹ï¼ˆSocketç«¯å£10086ï¼‰
- [x] æŠ•æ³¨å¹³å°ç½‘ç«™ï¼ˆå¯è®¿é—®ï¼‰

---

## âœ¨ äº®ç‚¹åŠŸèƒ½

### 1. ä¸‰ç»´åº¦è®¢å•çŠ¶æ€è®¾è®¡ â­â­â­
**åˆ›æ–°ç‚¹ï¼š**
- OrderStatusï¼šæµç¨‹ç®¡ç†
- OrderTypeï¼šä¸šåŠ¡è§„åˆ™
- MemberStateï¼šæ‰©å±•èƒ½åŠ›

**ä¼˜åŠ¿ï¼š**
- æ”¯æŒå¤æ‚ä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚ï¼šè“ä¼šå¤§é¢å¤šæ‰“ï¼‰
- å†å²æ•°æ®åˆ†æ
- å·®å¼‚åŒ–å¤„ç†

### 2. å¼‚æ­¥éé˜»å¡æŠ•æ³¨ â­â­â­
**æŠ€æœ¯ï¼š**
- BetQueueManageré˜Ÿåˆ—ç®¡ç†
- ä¿¡å·é‡æ§åˆ¶å¹¶å‘
- Taskå¼‚æ­¥æ¨¡å¼

**ä¼˜åŠ¿ï¼š**
- æ‰‹åŠ¨å‘½ä»¤ä¸è¢«é˜»å¡
- å¤šé…ç½®å¹¶è¡ŒæŠ•æ³¨
- æ€§èƒ½ä¼˜åŒ–

### 3. Cookieè‡ªåŠ¨å›ä¼  â­â­
**åˆ›æ–°ç‚¹ï¼š**
- é¡µé¢åŠ è½½è‡ªåŠ¨è§¦å‘
- Socketå®æ—¶é€šä¿¡
- é…ç½®è‡ªåŠ¨ä¿å­˜

**ä¼˜åŠ¿ï¼š**
- å…æ‰‹åŠ¨å¤åˆ¶
- å®æ—¶æ›´æ–°
- ä¾¿äºè°ƒè¯•

### 4. å‘½ä»¤é¢æ¿ â­â­
**ç‰¹æ€§ï¼š**
- å¿«æ·æŒ‰é’®
- å‘½ä»¤è§£æ
- JSONæ ¼å¼åŒ–æ˜¾ç¤º

**ä¼˜åŠ¿ï¼š**
- å¿«é€Ÿæµ‹è¯•
- çµæ´»æ§åˆ¶
- ä¾¿äºè°ƒè¯•

---

## ğŸ“– å‚è€ƒæ–‡æ¡£

- [âœ…æŠ•æ³¨æµç¨‹é‡æ„è®¾è®¡.md](./âœ…æŠ•æ³¨æµç¨‹é‡æ„è®¾è®¡.md)
- [âœ…ä¸‰ç»´åº¦è®¢å•çŠ¶æ€å®æ–½å®Œæˆ.md](./âœ…ä¸‰ç»´åº¦è®¢å•çŠ¶æ€å®æ–½å®Œæˆ.md)
- [âœ…Cookieå’Œå‘½ä»¤åŠŸèƒ½å®ç°å®Œæˆ.md](./âœ…Cookieå’Œå‘½ä»¤åŠŸèƒ½å®ç°å®Œæˆ.md)
- [ğŸ¯é…ç½®é©±åŠ¨çš„è‡ªåŠ¨æŠ•æ³¨è®¾è®¡.md](./ğŸ¯é…ç½®é©±åŠ¨çš„è‡ªåŠ¨æŠ•æ³¨è®¾è®¡.md)
- [ğŸŠåŒé€šé“æ¶æ„å®ç°å®Œæˆ-HTTP+Socket.md](./ğŸŠåŒé€šé“æ¶æ„å®ç°å®Œæˆ-HTTP+Socket.md)

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
1. âœ… å…³é—­è¿è¡Œä¸­çš„BsBrowserClientè¿›ç¨‹ï¼Œå®Œæˆå®Œæ•´ç¼–è¯‘
2. âœ… æµ‹è¯•Cookieå›ä¼ åŠŸèƒ½
3. âœ… æµ‹è¯•å‘½ä»¤é¢æ¿åŠŸèƒ½
4. å®ç°è“ä¼šå¤§é¢å¤šæ‰“åŠŸèƒ½
5. æ·»åŠ æŠ•æ³¨è®°å½•æŸ¥è¯¢UI

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
1. å®Œå–„æŠ•æ³¨å‘½ä»¤è§£æï¼ˆæ”¯æŒå½“å‰æœŸå·ï¼‰
2. å®ç°è®¢å•ç­›é€‰åŠŸèƒ½
3. ä¼˜åŒ–æ€§èƒ½ï¼ˆå¤§æ•°æ®é‡æµ‹è¯•ï¼‰
4. æ·»åŠ æ›´å¤šå¹³å°æ”¯æŒ

### é•¿æœŸï¼ˆæŒç»­ï¼‰
1. é…ç½®é©±åŠ¨çš„ä¸šåŠ¡è§„åˆ™å¼•æ“
2. å¯è§†åŒ–æŠ¥è¡¨
3. é£é™©æ§åˆ¶ï¼ˆé™é¢ã€é¢„è­¦ï¼‰
4. ç§»åŠ¨ç«¯æ”¯æŒ

---

**é¡¹ç›®çŠ¶æ€ï¼š** ğŸŸ¢ å¥åº·

**åŠŸèƒ½å®Œæˆåº¦ï¼š** 85%

**ä»£ç è´¨é‡ï¼š** â­â­â­â­ (4/5)

**æµ‹è¯•è¦†ç›–ï¼š** â³ å¾…æµ‹è¯•

---

**æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼** ğŸ‰

æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œå‰©ä½™TODOä¸»è¦æ˜¯ä¼˜åŒ–å’Œå¢å¼ºåŠŸèƒ½ã€‚é¡¹ç›®æ¶æ„æ¸…æ™°ï¼Œä»£ç å¤ç”¨è‰¯å¥½ï¼Œæ— æ˜æ˜¾å†—ä½™ã€‚å»ºè®®å°½å¿«å®Œæˆæµ‹è¯•ï¼Œç¡®ä¿ç¨³å®šåå†æ‰©å±•æ–°åŠŸèƒ½ã€‚

