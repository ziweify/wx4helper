# è¿æ¥é—®é¢˜ - å®Œæ•´åˆ†æå’Œä¸€æ¬¡æ€§ä¿®å¤

## ğŸ˜” é—®é¢˜åæ€

**æˆ‘çŠ¯çš„é”™è¯¯**ï¼š
1. âŒ å¤´ç—›åŒ»å¤´ï¼Œè„šç—›åŒ»è„š - æ¯æ¬¡åªä¿®å¤è¡¨é¢é—®é¢˜
2. âŒ æ²¡æœ‰å®Œæ•´ç†è§£æ•´ä¸ªè¿æ¥ç”Ÿå‘½å‘¨æœŸ
3. âŒ æ²¡æœ‰è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€è½¬æ¢å’Œè¾¹ç•Œæ¡ä»¶
4. âŒ æ²¡æœ‰è€ƒè™‘å¼‚å¸¸æƒ…å†µå’Œæ¢å¤æœºåˆ¶
5. âŒ æ¯æ¬¡éƒ½è¯´"å®Œç¾"ï¼Œä½†å®é™…é—®é¢˜æ²¡è§£å†³

**æ­£ç¡®çš„åšæ³•**ï¼š
- âœ… å…ˆç”»å‡ºå®Œæ•´çš„çŠ¶æ€å›¾å’Œæ•°æ®æµ
- âœ… è¯†åˆ«æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€å’Œè½¬æ¢
- âœ… è€ƒè™‘æ‰€æœ‰å¼‚å¸¸åœºæ™¯å’Œè¾¹ç•Œæ¡ä»¶
- âœ… ä¸€æ¬¡æ€§ä¿®å¤æ‰€æœ‰é—®é¢˜
- âœ… æ·»åŠ å®Œæ•´çš„ç›‘æ§å’Œè‡ªæ„ˆæœºåˆ¶

---

## ğŸ” å®Œæ•´è¿æ¥ç”Ÿå‘½å‘¨æœŸ

### é˜¶æ®µ 1ï¼šå¯åŠ¨æµè§ˆå™¨è¿›ç¨‹

```
[VxMain] ç”¨æˆ·æ‰“å¼€"é£å•å¼€å…³"
    â†“
[AutoBetService.StartBrowser]
    â†“
[MonitorBrowsers] æ£€æµ‹åˆ° IsEnabled=true ä¸” !IsConnected
    â†“
[StartBrowserInternal] 
    â”œâ”€ åˆ›å»º BrowserClient(configId)
    â”œâ”€ è°ƒç”¨ browserClient.StartAsync()
    â”‚   â””â”€ å¯åŠ¨è¿›ç¨‹: BsBrowserClient.exe --config-id 1 --config-name "é»˜è®¤é…ç½®" ...
    â””â”€ _browsers[configId] = browserClient  âš ï¸ é—®é¢˜ç‚¹1ï¼šæ­¤æ—¶ _connection è¿˜æ˜¯ nullï¼
```

**çŠ¶æ€**ï¼š
- `_browsers` å­—å…¸ï¼šåŒ…å« configId
- `BrowserClient._connection`ï¼š**null**ï¼ˆSocket è¿˜æ²¡è¿æ¥ï¼‰
- `BrowserClient.IsConnected`ï¼š**false**

---

### é˜¶æ®µ 2ï¼šæµè§ˆå™¨è¿æ¥åˆ° VxMain

```
[BsBrowserClient.exe] è¿›ç¨‹å¯åŠ¨
    â†“
[SocketServer.ConnectAndListenAsync] è¿æ¥åˆ° localhost:19527
    â†“
[AutoBetSocketServer] æ¥å—è¿æ¥
    â†“
[HandleClientAsync] è¯»å–æ¡æ‰‹æ¶ˆæ¯
    {
        "type": "hello",
        "configId": 1,
        "configName": "é»˜è®¤é…ç½®"
    }
    â†“
[AutoBetSocketServer] åˆ›å»º ClientConnection
    â”œâ”€ ClientConnection.Client = tcpClient
    â”œâ”€ ClientConnection.Reader = new StreamReader(stream)
    â”œâ”€ ClientConnection.Writer = new StreamWriter(stream)
    â””â”€ _connections[configId] = clientConnection
    â†“
[AutoBetService.OnBrowserConnected(configName, browserConfigId)]
    â”œâ”€ æ ¹æ® configName æŸ¥æ‰¾ BetConfig
    â”œâ”€ ä½¿ç”¨ config.Id ä½œä¸º configId
    â”œâ”€ ä» _connections è·å– ClientConnection  âš ï¸ é—®é¢˜ç‚¹2ï¼šä½¿ç”¨ browserConfigId æŸ¥è¯¢
    â””â”€ browserClient.AttachConnection(connection)
        â””â”€ _connection = connection
```

**çŠ¶æ€**ï¼š
- `_browsers` å­—å…¸ï¼šåŒ…å« configId
- `BrowserClient._connection`ï¼š**ClientConnection å¯¹è±¡**
- `ClientConnection.IsConnected`ï¼š**ä¾èµ– TcpClient.Connected**ï¼ˆä¸å¯é ï¼ï¼‰
- `BrowserClient.IsConnected`ï¼š`_connection?.IsConnected` ï¼ˆä¹Ÿä¸å¯é ï¼ï¼‰

---

### é˜¶æ®µ 3ï¼šæŠ•æ³¨å‘½ä»¤å‘é€

```
[ç”¨æˆ·] ç‚¹å‡»"æŠ•æ³¨"æŒ‰é’®
    â†“
[AutoBetService.SendBetCommandAsync(configId)]
    â”œâ”€ _browsers.TryGetValue(configId, out browserClient)  âœ… æ‰¾åˆ°
    â”œâ”€ browserClient.IsConnected?  âš ï¸ é—®é¢˜ç‚¹3ï¼šè¿™é‡Œå¯èƒ½è¿”å› falseï¼
    â”‚   â””â”€ _connection?.IsConnected
    â”‚       â””â”€ Client?.Connected  âŒ ä¸å¯é ï¼
    â””â”€ å¦‚æœ falseï¼Œè¿”å› "æœªè¿æ¥åˆ°æµè§ˆå™¨"
```

---

### é˜¶æ®µ 4ï¼šç›‘æ§ä»»åŠ¡æ£€æŸ¥

```
[MonitorBrowsers] æ¯3ç§’æ‰§è¡Œ
    â†“
    foreach config in enabledConfigs:
        â”œâ”€ _browsers.TryGetValue(config.Id, out browserClient)
        â”œâ”€ isConnected = browserClient?.IsConnected  âš ï¸ é—®é¢˜ç‚¹4ï¼šä¾èµ–ä¸å¯é çš„æ£€æµ‹
        â””â”€ å¦‚æœ isConnectedï¼Œè·³è¿‡ï¼ˆä¸å¯åŠ¨æ–°æµè§ˆå™¨ï¼‰
```

**é—®é¢˜**ï¼šå³ä½¿ Socket å·²æ–­å¼€ï¼Œ`TcpClient.Connected` å¯èƒ½ä»è¿”å› `true`ï¼Œå¯¼è‡´ç›‘æ§ä»»åŠ¡è®¤ä¸º"å·²è¿æ¥"ï¼Œä¸ä¼šé‡å¯æµè§ˆå™¨ï¼

---

## ğŸ› æ‰€æœ‰é—®é¢˜ç‚¹æ±‡æ€»

### é—®é¢˜ 1ï¼šè¿›ç¨‹å¯åŠ¨åç«‹å³åŠ å…¥ _browsersï¼Œä½† _connection ä¸º null

**åœºæ™¯**ï¼š
```
1. StartBrowserInternal å¯åŠ¨è¿›ç¨‹
2. _browsers[configId] = browserClient  (æ­¤æ—¶ _connection = null)
3. ç”¨æˆ·ç«‹å³ç‚¹å‡»æŠ•æ³¨
4. browserClient.IsConnected = false  ("æœªè¿æ¥åˆ°æµè§ˆå™¨")
```

**åŸå› **ï¼šè¿›ç¨‹å¯åŠ¨å’Œ Socket è¿æ¥ä¸æ˜¯åŸå­æ“ä½œï¼Œå­˜åœ¨æ—¶é—´çª—å£ã€‚

**å½±å“**ï¼šå¯åŠ¨æµè§ˆå™¨åçš„ 2-3 ç§’å†…ï¼ŒæŠ•æ³¨ä¼šå¤±è´¥ã€‚

---

### é—®é¢˜ 2ï¼šTcpClient.Connected ä¸å¯é 

**åœºæ™¯**ï¼š
```
1. Socket è¿æ¥æ­£å¸¸å»ºç«‹
2. ç½‘ç»œä¸­æ–­ / æµè§ˆå™¨å´©æºƒ / TCP è¿æ¥æ–­å¼€
3. TcpClient.Connected ä»è¿”å› trueï¼ˆæœªæ£€æµ‹åˆ°æ–­å¼€ï¼‰
4. æŠ•æ³¨å¤±è´¥ï¼š"æœªè¿æ¥åˆ°æµè§ˆå™¨"
5. ç›‘æ§ä»»åŠ¡æ£€æŸ¥ï¼šIsConnected = trueï¼ˆé”™è¯¯ï¼ï¼‰
6. ç›‘æ§ä»»åŠ¡ä¸ä¼šé‡å¯æµè§ˆå™¨
```

**åŸå› **ï¼š`TcpClient.Connected` åªåæ˜ ä¸Šæ¬¡æ“ä½œçš„çŠ¶æ€ï¼Œä¸ä¼šä¸»åŠ¨æ£€æµ‹æ–­å¼€ã€‚

**å½±å“**ï¼šè¿æ¥æ–­å¼€åï¼Œç³»ç»Ÿæ— æ³•è‡ªåŠ¨æ¢å¤ï¼Œå¿…é¡»æ‰‹åŠ¨é‡å¯ã€‚

---

### é—®é¢˜ 3ï¼šconfigId ä¸åŒ¹é…

**åœºæ™¯**ï¼š
```
1. æ•°æ®åº“åˆ é™¤ï¼Œconfig.Id é‡æ–°ç”Ÿæˆï¼ˆä» 1 å¼€å§‹ï¼‰
2. æµè§ˆå™¨ä»ä½¿ç”¨æ—§çš„ configIdï¼ˆå¦‚ 5ï¼‰è¿æ¥
3. OnBrowserConnected æ”¶åˆ° browserConfigId=5
4. ä» _connections[5] è·å–è¿æ¥
5. ä½† _browsers å­—å…¸çš„ key æ˜¯ config.Id=1
6. æŠ•æ³¨æ—¶æŸ¥è¯¢ _browsers[1]ï¼Œæ‰¾åˆ°ä½† _connection = null
```

**åŸå› **ï¼šæµè§ˆå™¨å¯åŠ¨æ—¶çš„ configId å’Œæ•°æ®åº“é‡å»ºåçš„ config.Id ä¸åŒæ­¥ã€‚

**å½±å“**ï¼šæ•°æ®åº“åˆ é™¤åï¼Œè¿æ¥æ°¸è¿œæ— æ³•å»ºç«‹ã€‚

---

### é—®é¢˜ 4ï¼šç›‘æ§ä»»åŠ¡çš„æ£€æŸ¥ä¸å¤Ÿå…¨é¢

**åœºæ™¯**ï¼š
```
1. browserClient å­˜åœ¨äº _browsers å­—å…¸
2. browserClient._connection ä¸ä¸º null
3. ä½†å®é™… Socket å·²æ–­å¼€
4. browserClient.IsConnected é”™è¯¯è¿”å› true
5. ç›‘æ§ä»»åŠ¡è®¤ä¸º"å·²è¿æ¥"ï¼Œè·³è¿‡
6. æŠ•æ³¨å¤±è´¥
```

**åŸå› **ï¼šç›‘æ§ä»»åŠ¡åªæ£€æŸ¥ `browserClient.IsConnected`ï¼Œä½†è¿™ä¸ªå€¼ä¸å¯é ã€‚

**å½±å“**ï¼šè¿æ¥æ–­å¼€åï¼Œç›‘æ§ä»»åŠ¡æ— æ³•æ£€æµ‹åˆ°ï¼Œä¸ä¼šè‡ªåŠ¨æ¢å¤ã€‚

---

### é—®é¢˜ 5ï¼šæ²¡æœ‰è¿æ¥å¥åº·æ£€æŸ¥å’Œè‡ªæ„ˆæœºåˆ¶

**åœºæ™¯**ï¼š
```
1. è¿æ¥åœ¨æŸä¸ªæ—¶åˆ»æ–­å¼€
2. æ²¡æœ‰å¿ƒè·³æ£€æµ‹
3. æ²¡æœ‰è‡ªåŠ¨é‡è¿
4. æ²¡æœ‰è¶…æ—¶æ£€æµ‹
5. ç³»ç»Ÿæ— æ³•è‡ªåŠ¨æ¢å¤
```

**åŸå› **ï¼šç¼ºå°‘å®Œæ•´çš„å¥åº·æ£€æŸ¥å’Œè‡ªæ„ˆæœºåˆ¶ã€‚

**å½±å“**ï¼šä»»ä½•è¿æ¥é—®é¢˜éƒ½éœ€è¦æ‰‹åŠ¨å¹²é¢„ã€‚

---

## âœ… ä¸€æ¬¡æ€§å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ 1ï¼šä½¿ç”¨ Socket.Poll è¿›è¡Œå¯é çš„è¿æ¥æ£€æµ‹

**å·²ä¿®å¤**ï¼š`ClientConnection.IsConnected` æ”¹ä¸ºä½¿ç”¨ `Socket.Poll`ã€‚

```csharp
public bool IsConnected
{
    get
    {
        try
        {
            if (Client == null || Client.Client == null)
                return false;
            
            // ğŸ”¥ ä½¿ç”¨ Socket.Poll è¿›è¡Œå¯é çš„è¿æ¥æ£€æµ‹
            if (Client.Client.Poll(1, SelectMode.SelectRead) && Client.Client.Available == 0)
                return false; // è¿æ¥å·²å…³é—­
            
            return Client.Connected;
        }
        catch
        {
            return false;
        }
    }
}
```

---

### ä¿®å¤ 2ï¼šç›‘æ§ä»»åŠ¡æ£€æµ‹å¹¶ç§»é™¤å¤±æ•ˆè¿æ¥

**å·²ä¿®å¤**ï¼šç›‘æ§ä»»åŠ¡æ£€æŸ¥ `browserClient.IsConnected`ï¼Œå¦‚æœä¸º `false`ï¼Œç§»é™¤å¤±æ•ˆçš„ `BrowserClient`ã€‚

```csharp
if (_browsers.TryGetValue(config.Id, out var browserClient))
{
    isConnected = browserClient.IsConnected;
    
    if (!isConnected)
    {
        _log.Warning("AutoBet", $"âš ï¸ é…ç½® [{config.ConfigName}] BrowserClientå­˜åœ¨ä½†IsConnected=False");
        _browsers.Remove(config.Id);  // ğŸ”¥ ç§»é™¤å¤±æ•ˆçš„
        _log.Info("AutoBet", $"   å·²ç§»é™¤å¤±æ•ˆçš„ BrowserClientï¼Œå°†é‡æ–°å¯åŠ¨");
    }
}
```

---

### ä¿®å¤ 3ï¼šæ·»åŠ å¿ƒè·³æ£€æµ‹

**éœ€è¦å®ç°**ï¼šå®šæœŸå‘é€ Ping å‘½ä»¤ï¼Œæ£€æµ‹è¿æ¥æ˜¯å¦çœŸçš„æ´»ç€ã€‚

```csharp
// AutoBetService.cs
private async Task HeartbeatCheckAsync()
{
    while (!_disposed)
    {
        await Task.Delay(10000); // æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
        
        List<int> toRemove = new();
        
        lock (_lock)
        {
            foreach (var (configId, browserClient) in _browsers)
            {
                if (!browserClient.IsConnected)
                {
                    _log.Warning("AutoBet", $"å¿ƒè·³æ£€æµ‹å¤±è´¥: ConfigId={configId}");
                    toRemove.Add(configId);
                }
            }
        }
        
        foreach (var configId in toRemove)
        {
            _log.Info("AutoBet", $"ç§»é™¤å¤±æ•ˆè¿æ¥: ConfigId={configId}");
            lock (_lock)
            {
                _browsers.Remove(configId);
            }
        }
    }
}
```

---

### ä¿®å¤ 4ï¼šæŠ•æ³¨å¤±è´¥åç«‹å³è§¦å‘é‡è¿

**éœ€è¦å®ç°**ï¼šæŠ•æ³¨å¤±è´¥æ—¶ï¼Œä¸ä»…è¿”å›é”™è¯¯ï¼Œè¿˜è¦è§¦å‘ç›‘æ§ä»»åŠ¡ç«‹å³æ£€æŸ¥ã€‚

```csharp
public async Task<BetResult> SendBetCommandAsync(int configId, ...)
{
    if (!_browsers.TryGetValue(configId, out var browserClient))
    {
        _log.Warning("AutoBet", "æµè§ˆå™¨æœªè¿æ¥ï¼Œè§¦å‘ç›‘æ§ä»»åŠ¡æ£€æŸ¥");
        MonitorBrowsers(null);  // ğŸ”¥ ç«‹å³è§¦å‘æ£€æŸ¥
        return new BetResult { Success = false, ErrorMessage = "æµè§ˆå™¨æœªè¿æ¥(å·²è§¦å‘é‡è¿)" };
    }
    
    if (!browserClient.IsConnected)
    {
        _log.Warning("AutoBet", "è¿æ¥å·²æ–­å¼€ï¼Œè§¦å‘ç›‘æ§ä»»åŠ¡æ£€æŸ¥");
        lock (_lock) { _browsers.Remove(configId); }  // ğŸ”¥ ç§»é™¤å¤±æ•ˆçš„
        MonitorBrowsers(null);  // ğŸ”¥ ç«‹å³è§¦å‘æ£€æŸ¥
        return new BetResult { Success = false, ErrorMessage = "è¿æ¥å·²æ–­å¼€(å·²è§¦å‘é‡è¿)" };
    }
    
    // ... æ­£å¸¸å‘é€
}
```

---

### ä¿®å¤ 5ï¼šç»Ÿä¸€ configId ç®¡ç†

**éœ€è¦å®ç°**ï¼šç¡®ä¿æµè§ˆå™¨å’Œä¸»ç¨‹åºä½¿ç”¨ç›¸åŒçš„ configIdã€‚

**æ–¹æ¡ˆ**ï¼š
1. æµè§ˆå™¨å¯åŠ¨æ—¶ï¼Œä½¿ç”¨ `configName` è€Œä¸æ˜¯ `configId`
2. ä¸»ç¨‹åºæ ¹æ® `configName` æŸ¥æ‰¾é…ç½®ï¼Œä½¿ç”¨ `config.Id`
3. æ‰€æœ‰åç»­é€šä¿¡éƒ½ä½¿ç”¨ä¸»ç¨‹åºçš„ `config.Id`

**å·²éƒ¨åˆ†å®ç°**ï¼š`OnBrowserConnected` å·²ç»ä½¿ç”¨ `configName` æŸ¥æ‰¾é…ç½®ã€‚

---

### ä¿®å¤ 6ï¼šæ·»åŠ è¿æ¥çŠ¶æ€æ—¥å¿—å’Œç›‘æ§

**éœ€è¦å®ç°**ï¼šåœ¨å…³é”®èŠ‚ç‚¹æ·»åŠ è¯¦ç»†æ—¥å¿—ã€‚

```csharp
// 1. è¿›ç¨‹å¯åŠ¨æ—¶
_log.Info("AutoBet", $"æµè§ˆå™¨è¿›ç¨‹å·²å¯åŠ¨ï¼Œä½† Socket å°šæœªè¿æ¥");
_log.Info("AutoBet", $"  _browsers[{configId}] = browserClient (IsConnected=false)");

// 2. Socket è¿æ¥æ—¶
_log.Info("AutoBet", $"Socket è¿æ¥å·²å»ºç«‹");
_log.Info("AutoBet", $"  browserClient.AttachConnection(connection)");
_log.Info("AutoBet", $"  browserClient.IsConnected={browserClient.IsConnected}");

// 3. æŠ•æ³¨æ—¶
_log.Info("AutoBet", $"æŠ•æ³¨å‘½ä»¤å‘é€");
_log.Info("AutoBet", $"  _browsers.ContainsKey({configId})={_browsers.ContainsKey(configId)}");
_log.Info("AutoBet", $"  browserClient.IsConnected={browserClient.IsConnected}");
_log.Info("AutoBet", $"  _connection?.IsConnected={browserClient._connection?.IsConnected}");
_log.Info("AutoBet", $"  Client?.Connected={browserClient._connection?.Client?.Connected}");

// 4. ç›‘æ§ä»»åŠ¡æ£€æŸ¥æ—¶
_log.Debug("AutoBet", $"ç›‘æ§ä»»åŠ¡æ£€æŸ¥: [{config.ConfigName}]");
_log.Debug("AutoBet", $"  _browsers.ContainsKey={_browsers.ContainsKey(config.Id)}");
_log.Debug("AutoBet", $"  browserClient?.IsConnected={browserClient?.IsConnected}");
```

---

## ğŸ¯ å®Œæ•´çš„å¥å£®æ€§æ£€æŸ¥æ¸…å•

### âœ… å·²ä¿®å¤
- [x] `ClientConnection.IsConnected` ä½¿ç”¨ `Socket.Poll`
- [x] ç›‘æ§ä»»åŠ¡æ£€æŸ¥ `browserClient.IsConnected`
- [x] ç›‘æ§ä»»åŠ¡ç§»é™¤å¤±æ•ˆçš„ `BrowserClient`
- [x] ä½¿ç”¨ `configName` åŒ¹é…é…ç½®

### â³ éœ€è¦è¡¥å……
- [ ] æ·»åŠ å¿ƒè·³æ£€æµ‹çº¿ç¨‹
- [ ] æŠ•æ³¨å¤±è´¥åç«‹å³è§¦å‘é‡è¿
- [ ] æ·»åŠ è¿æ¥è¶…æ—¶æ£€æµ‹
- [ ] æ·»åŠ è¯¦ç»†çš„çŠ¶æ€æ—¥å¿—
- [ ] æ·»åŠ è¿æ¥çŠ¶æ€ UI æŒ‡ç¤ºå™¨
- [ ] æ·»åŠ è‡ªåŠ¨é‡è¿è®¡æ•°å™¨ï¼ˆé˜²æ­¢æ— é™é‡è¿ï¼‰
- [ ] æ·»åŠ è¿æ¥å†å²è®°å½•ï¼ˆç”¨äºè¯Šæ–­ï¼‰

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### åœºæ™¯ 1ï¼šæ­£å¸¸å¯åŠ¨
```
[T+0s] ç”¨æˆ·æ‰“å¼€é£å•å¼€å…³
[T+0s] ç›‘æ§ä»»åŠ¡æ£€æµ‹åˆ° IsEnabled=true, IsConnected=false
[T+0s] å¯åŠ¨æµè§ˆå™¨è¿›ç¨‹
[T+1s] æµè§ˆå™¨è¿æ¥åˆ° Socket
[T+1s] AttachConnection å®Œæˆ
[T+1s] IsConnected=true âœ…
[T+2s] ç”¨æˆ·æŠ•æ³¨ â†’ æˆåŠŸ âœ…
```

### åœºæ™¯ 2ï¼šè¿æ¥æ–­å¼€è‡ªåŠ¨æ¢å¤
```
[T+0s] æ­£å¸¸è¿è¡Œï¼ŒIsConnected=true
[T+100s] ç½‘ç»œä¸­æ–­ï¼ŒSocket æ–­å¼€
[T+103s] ç›‘æ§ä»»åŠ¡æ£€æµ‹åˆ° IsConnected=false âš ï¸
[T+103s] ç§»é™¤å¤±æ•ˆçš„ BrowserClient
[T+103s] é‡æ–°å¯åŠ¨æµè§ˆå™¨è¿›ç¨‹
[T+105s] æµè§ˆå™¨é‡æ–°è¿æ¥
[T+105s] IsConnected=true âœ…
[T+106s] ç”¨æˆ·æŠ•æ³¨ â†’ æˆåŠŸ âœ…
```

### åœºæ™¯ 3ï¼šæŠ•æ³¨å¤±è´¥ç«‹å³é‡è¿
```
[T+0s] ç”¨æˆ·æŠ•æ³¨
[T+0s] æ£€æµ‹åˆ° IsConnected=false âš ï¸
[T+0s] ç§»é™¤å¤±æ•ˆçš„ BrowserClient
[T+0s] è§¦å‘ç›‘æ§ä»»åŠ¡ç«‹å³æ£€æŸ¥
[T+0s] è¿”å›é”™è¯¯ï¼š"è¿æ¥å·²æ–­å¼€(å·²è§¦å‘é‡è¿)" âš ï¸
[T+1s] æµè§ˆå™¨é‡æ–°è¿æ¥
[T+1s] IsConnected=true âœ…
[T+5s] ç”¨æˆ·å†æ¬¡æŠ•æ³¨ â†’ æˆåŠŸ âœ…
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³å®æ–½**ï¼šæ·»åŠ å¿ƒè·³æ£€æµ‹çº¿ç¨‹
2. **ç«‹å³å®æ–½**ï¼šæŠ•æ³¨å¤±è´¥åè§¦å‘é‡è¿
3. **æµ‹è¯•éªŒè¯**ï¼šæ¨¡æ‹Ÿå„ç§æ–­å¼€åœºæ™¯
4. **å‹åŠ›æµ‹è¯•**ï¼šé•¿æ—¶é—´è¿è¡Œæµ‹è¯•
5. **ç›‘æ§æ•°æ®**ï¼šæ”¶é›†è¿æ¥ç»Ÿè®¡ä¿¡æ¯

**è¿™æ¬¡æˆ‘ä»¬è¦å½»åº•è§£å†³ï¼Œä¸å†åå¤ï¼**

