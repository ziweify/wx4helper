# ğŸš§ è‡ªåŠ¨æŠ•æ³¨ç³»ç»Ÿå®Œå–„è¿›åº¦

## âœ… å·²å®Œæˆ

### 1. æ ¸å¿ƒæ¶æ„ âœ…
- âœ… `BsBrowserClient` ç‹¬ç«‹å·¥ç¨‹
- âœ… `BrowserClient` Socket å®¢æˆ·ç«¯
- âœ… `AutoBetService` ç®¡ç†æœåŠ¡
- âœ… `AutoBetCoordinator` åè°ƒå™¨ï¼ˆè¿æ¥å¼€å¥–å’ŒæŠ•æ³¨ï¼‰
- âœ… ç¼–è¯‘æˆåŠŸ

### 2. AutoBetCoordinator åŠŸèƒ½ âœ…
- âœ… å¯åŠ¨/åœæ­¢è‡ªåŠ¨æŠ•æ³¨
- âœ… è®¢é˜…å¼€å¥–äº‹ä»¶
- âœ… å°ç›˜æ—¶è‡ªåŠ¨æ‰§è¡ŒæŠ•æ³¨
- âœ… æ‰‹åŠ¨æŠ•æ³¨æ¥å£

---

## ğŸš§ è¿›è¡Œä¸­

### 1. VxMain UI é…ç½®ï¼ˆå½“å‰ä»»åŠ¡ï¼‰
éœ€è¦åœ¨å¿«é€Ÿè®¾ç½®é¢æ¿æ·»åŠ ï¼š
- [ ] ç›˜å£å¹³å°ä¸‹æ‹‰æ¡†ï¼ˆäº‘é¡¶28ã€æµ·å³¡28ç­‰ï¼‰
- [ ] è´¦å·è¾“å…¥æ¡†
- [ ] å¯†ç è¾“å…¥æ¡†
- [ ] å¯ç”¨è‡ªåŠ¨æŠ•æ³¨å¼€å…³
- [ ] å¯åŠ¨æµè§ˆå™¨æŒ‰é’®

### 2. å¹³å°è„šæœ¬å®Œå–„ï¼ˆå‚è€ƒF5BotV2ï¼‰
éœ€è¦åœ¨ `YunDing28Script.cs` ä¸­å®ç°ï¼š
- [ ] `LoginAsync` - ç™»å½•è„šæœ¬
- [ ] `GetBalanceAsync` - è·å–ä½™é¢
- [ ] `PlaceBetAsync` - æŠ•æ³¨è„šæœ¬
- [ ] JavaScript æ³¨å…¥é€»è¾‘

### 3. å®Œæ•´æµç¨‹å¯¹æ¥
- [ ] ç”¨æˆ·åœ¨ä¼šå‘˜ç¾¤ä¸‹æ³¨ â†’ è®¢å•åˆ›å»º
- [ ] è®¢å•è§¦å‘è‡ªåŠ¨æŠ•æ³¨ â†’ å‘é€åˆ°æµè§ˆå™¨
- [ ] æµè§ˆå™¨æ‰§è¡ŒæŠ•æ³¨ â†’ è¿”å›ç»“æœ
- [ ] æ›´æ–°è®¢å•çŠ¶æ€

---

## ğŸ“‹ å®ç°æ­¥éª¤

### æ­¥éª¤1: VxMain UI æ·»åŠ è‡ªåŠ¨æŠ•æ³¨é…ç½®

```csharp
// VxMain.cs ä¸­æ·»åŠ 
private void InitializeAutoBetControls()
{
    // åŠ¨æ€æ·»åŠ åˆ° pnl_fastsetting
    var lblPlatform = new Label { Text = "ç›˜å£:", ...};
    var cbxPlatform = new UIComboBox { Items = {"äº‘é¡¶28", "æµ·å³¡28"}, ...};
    
    var lblUsername = new Label { Text = "è´¦å·:", ...};
    var txtUsername = new UITextBox { ...};
    
    var lblPassword = new Label { Text = "å¯†ç :", ...};
    var txtPassword = new UITextBox { PasswordChar = '*', ...};
    
    var chkAutoBet = new UICheckBox { Text = "å¯ç”¨è‡ªåŠ¨æŠ•æ³¨", ...};
    var btnStartBrowser = new UIButton { Text = "å¯åŠ¨æµè§ˆå™¨", ...};
    
    // æ·»åŠ åˆ°é¢æ¿
    pnl_fastsetting.Controls.Add(...);
    
    // ç»‘å®šäº‹ä»¶
    chkAutoBet.CheckedChanged += ChkAutoBet_CheckedChanged;
    btnStartBrowser.Click += BtnStartBrowser_Click;
}
```

### æ­¥éª¤2: æ³¨å†Œ AutoBetCoordinator åˆ° DI

```csharp
// Program.cs
services.AddSingleton<AutoBetService>();
services.AddSingleton<AutoBetCoordinator>();
```

### æ­¥éª¤3: VxMain æ³¨å…¥å¹¶ä½¿ç”¨

```csharp
// VxMain.cs
private readonly AutoBetCoordinator _autoBetCoordinator;

public VxMain(... AutoBetCoordinator autoBetCoordinator)
{
    _autoBetCoordinator = autoBetCoordinator;
}

private async void ChkAutoBet_CheckedChanged(object sender, EventArgs e)
{
    if (chkAutoBet.Checked)
    {
        // è·å–é»˜è®¤é…ç½®ID
        var config = _autoBetService.GetConfigs().FirstOrDefault(c => c.IsDefault);
        if (config != null)
        {
            await _autoBetCoordinator.StartAsync(config.Id);
        }
    }
    else
    {
        _autoBetCoordinator.Stop();
    }
}
```

### æ­¥éª¤4: å®Œå–„å¹³å°è„šæœ¬ï¼ˆå‚è€ƒF5BotV2ï¼‰

æŸ¥çœ‹ F5BotV2 ä¸­çš„å®ç°æ¨¡å¼ï¼š
- `EvaluateScriptAsync` æ‰§è¡Œ JavaScript
- ç™»å½•ã€æŠ•æ³¨ã€è·å–ä½™é¢çš„è„šæœ¬
- Cookie ç®¡ç†

### æ­¥éª¤5: å¯¹æ¥è®¢å•åˆ›å»ºåˆ°è‡ªåŠ¨æŠ•æ³¨

åœ¨ `BinggoOrderService.CreateOrderAsync` ä¸­ï¼š
```csharp
// åˆ›å»ºè®¢å•åï¼Œå¦‚æœå¯ç”¨è‡ªåŠ¨æŠ•æ³¨
if (_autoBetCoordinator.IsEnabled)
{
    var betOrder = new BetOrder
    {
        IssueId = issueId.ToString(),
        PlayType = content.BetType,
        BetContent = content.BetNumberStr,
        Amount = content.BetAmount
    };
    
    var result = await _autoBetCoordinator.PlaceBetManualAsync(betOrder);
    
    // æ›´æ–°è®¢å•çŠ¶æ€
    if (result.Success)
    {
        order.PlatformOrderId = result.OrderId;
        order.Status = "å·²æŠ•æ³¨";
    }
}
```

---

## ğŸ¯ å½“å‰ç›®æ ‡

1. âœ… AutoBetCoordinator ç¼–è¯‘æˆåŠŸ
2. ğŸš§ æ·»åŠ  VxMain UI é…ç½®
3. ğŸš§ å®Œå–„å¹³å°è„šæœ¬
4. ğŸš§ å¯¹æ¥å®Œæ•´æµç¨‹
5. ğŸ§ª æµ‹è¯•ç«¯åˆ°ç«¯æŠ•æ³¨

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: å¯†ç éœ€è¦åŠ å¯†å­˜å‚¨
2. **é”™è¯¯å¤„ç†**: ç½‘ç»œå¼‚å¸¸ã€æŠ•æ³¨å¤±è´¥çš„é‡è¯•æœºåˆ¶
3. **æ—¥å¿—è®°å½•**: è¯¦ç»†è®°å½•æŠ•æ³¨è¿‡ç¨‹
4. **çŠ¶æ€ç®¡ç†**: æµè§ˆå™¨è¿æ¥çŠ¶æ€ã€ç™»å½•çŠ¶æ€ç­‰
5. **æµ‹è¯•**: å…ˆç”¨æµ‹è¯•è´¦å·å’Œå°é‡‘é¢æµ‹è¯•

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

ç»§ç»­å®ç° VxMain UI å’Œå¹³å°è„šæœ¬...

