# ğŸ“ æšä¸¾ç»Ÿä¸€æ–¹æ¡ˆ

## âœ… é—®é¢˜å·²è§£å†³

### åŸå§‹è®¾è®¡ï¼ˆF5BotV2ï¼‰- æ¸…æ™°ç®€æ´

```csharp
// è®¢å•çŠ¶æ€ - è®¢å•å¤„ç†æµç¨‹
public enum OrderStatus
{
    æœªçŸ¥ = -1,
    å¾…å¤„ç† = 0,     // è®¢å•è¿›æ¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰æŠ•é€’è¿›ç½‘ç›˜
    å¾…ç»“ç®— = 1,     // å·²æŠ•æ³¨ï¼Œç­‰å¾…å¼€å¥–ç»“ç®—
    å·²å®Œæˆ = 2,     // ç»“ç®—å®Œæˆ
    å·²å–æ¶ˆ = 3
}

// è®¢å•ç±»å‹ - å†³å®šç»“ç®—æ–¹å¼
public enum OrderType
{
    å¾…å®š = 0,
    ç›˜å†… = 1,       // è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å†…
    ç›˜å¤– = 2,       // æ²¡è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å¤–
    æ‰˜ = 3          // å°±æ˜¯ä¸æ‰“è¿›ç›˜çš„
}
```

### å·²ç§»é™¤çš„å¤šä½™å†…å®¹

**OrderStatus ä¸­ç§»é™¤ï¼š**
- âŒ `ç›˜å¤– = 4` - è¿™ä¼šå’Œ OrderType.ç›˜å¤– æ··æ·†

**OrderType ä¸­ç§»é™¤ï¼š**
- âŒ `æ™®ä¼š = 1` - ä¼šå‘˜ç±»å‹åº”è¯¥åœ¨ MemberState ä¸­
- âŒ `é»„ä¼š = 5` - ä¼šå‘˜ç±»å‹åº”è¯¥åœ¨ MemberState ä¸­

### æ­£ç¡®çš„ç†è§£

**ä¸¤ä¸ªæšä¸¾é…åˆä½¿ç”¨ï¼š**

1. **OrderStatus** - æè¿°è®¢å•åœ¨ç³»ç»Ÿä¸­çš„å¤„ç†çŠ¶æ€
   - `å¾…å¤„ç†` â†’ è®¢å•åˆšè¿›æ¥ï¼Œè¿˜æ²¡æŠ•æ³¨
   - `å¾…ç»“ç®—` â†’ å·²ç»æŠ•æ³¨äº†ï¼Œç­‰å¾…å¼€å¥–ç»“ç®—
   - `å·²å®Œæˆ` â†’ å·²ç»ç»“ç®—å®Œæˆ
   - `å·²å–æ¶ˆ` â†’ è®¢å•è¢«å–æ¶ˆ

2. **OrderType** - æè¿°è®¢å•çš„æŠ•æ³¨ç±»å‹ï¼ˆå†³å®šå¦‚ä½•ç»“ç®—ï¼‰
   - `ç›˜å†…` â†’ æ­£å¸¸è¿›ç›˜ï¼Œéœ€è¦ç»“ç®—ç›ˆäº
   - `ç›˜å¤–` â†’ ä¸è¿›ç›˜ï¼Œä¸ç»“ç®—ç›ˆäº
   - `æ‰˜` â†’ æ‰˜å•ï¼Œä¸æ‰“è¿›ç›˜

**æŸ¥è¯¢é€»è¾‘**ï¼š

```csharp
// æŸ¥è¯¢å¾…æŠ•æ³¨è®¢å•
var pending = orders.Where(o => o.OrderStatus == OrderStatus.å¾…å¤„ç†);

// æŸ¥è¯¢å¾…ç»“ç®—è®¢å•ï¼ˆå·²æŠ•æ³¨æˆåŠŸçš„ï¼‰
var settling = orders.Where(o => o.OrderStatus == OrderStatus.å¾…ç»“ç®—);

// æŸ¥è¯¢ç›˜å†…è®¢å•ï¼ˆéœ€è¦ç»“ç®—çš„ï¼‰
var needSettle = orders.Where(o => o.OrderType == OrderType.ç›˜å†…);

// æŸ¥è¯¢æ‰˜å•ï¼ˆä¸éœ€è¦æ‰£é’±çš„ï¼‰
var tuoOrders = orders.Where(o => o.OrderType == OrderType.æ‰˜);

// æŸ¥è¯¢ç›˜å¤–è®¢å•ï¼ˆä¸éœ€è¦ç»“ç®—çš„ï¼‰
var outsideOrders = orders.Where(o => o.OrderType == OrderType.ç›˜å¤–);
```

---

## ğŸ”„ BetRecord è¡¨çš„çŠ¶æ€å¤„ç†

### å½“å‰è®¾è®¡

```csharp
public class BetRecord
{
    public bool? Success { get; set; }           // null=æœªè¿”å›, true=æˆåŠŸ, false=å¤±è´¥
    public string? ErrorMessage { get; set; }    // å¼‚å¸¸ä¿¡æ¯
    public BetRecordSource Source { get; set; }  // è®¢å• or å‘½ä»¤
}
```

### å»ºè®®ï¼šå¤ç”¨ OrderTypeï¼Ÿ

**æ–¹æ¡ˆ1ï¼šä¿æŒç°çŠ¶ï¼ˆæ¨èï¼‰**

`BetRecord` çš„ `Success` å­—æ®µå·²ç»è¶³å¤Ÿï¼š
- `null` = ç­‰å¾…è¿”å›
- `true` = æŠ•æ³¨æˆåŠŸ
- `false` = æŠ•æ³¨å¤±è´¥

æŠ•æ³¨æˆåŠŸ/å¤±è´¥åï¼Œé€šè¿‡å›è°ƒæ›´æ–°å…³è”çš„ `V2MemberOrder`ï¼š
- æˆåŠŸ â†’ `order.OrderStatus = å¾…ç»“ç®—`, `order.OrderType = ç›˜å†…`
- å¤±è´¥ â†’ `order.OrderStatus = å·²å®Œæˆ`, `order.OrderType = ç›˜å¤–`

**ä¼˜ç‚¹ï¼š**
- âœ… `BetRecord` æ˜¯æŠ•æ³¨å±‚é¢çš„è®°å½•ï¼Œåªå…³å¿ƒ"æˆåŠŸ/å¤±è´¥"
- âœ… `V2MemberOrder` æ˜¯è®¢å•å±‚é¢çš„è®°å½•ï¼Œå…³å¿ƒ"çŠ¶æ€+ç±»å‹"
- âœ… èŒè´£æ¸…æ™°ï¼Œä¸æ··æ·†

**æ–¹æ¡ˆ2ï¼šæ·»åŠ æŠ•æ³¨ç»“æœæšä¸¾ï¼ˆä¸æ¨èï¼‰**

```csharp
public enum BetResultType
{
    å¾…è¿”å› = 0,
    æˆåŠŸ = 1,
    å¤±è´¥ = 2
}

public class BetRecord
{
    public BetResultType BetResult { get; set; }
}
```

**ç¼ºç‚¹ï¼š**
- âš ï¸ å¼•å…¥æ–°æšä¸¾ï¼Œå¢åŠ å¤æ‚åº¦
- âš ï¸ ä¸ `bool? Success` åŠŸèƒ½é‡å¤

---

## ğŸ“Š å®Œæ•´çš„æšä¸¾ä½“ç³»

### ä¼šå‘˜ç›¸å…³

```csharp
/// <summary>
/// ä¼šå‘˜çŠ¶æ€ï¼ˆä»å¾®ä¿¡è”ç³»äººè§’åº¦ï¼‰
/// </summary>
public enum MemberState
{
    å·²åˆ é™¤ = -1,
    éä¼šå‘˜ = 0,
    ä¼šå‘˜ = 1,
    æ‰˜ = 2,
    ç®¡ç† = 3,
    å·²é€€ç¾¤ = 4,
    æ™®ä¼š = 5,      // æ™®é€šä¼šå‘˜ç­‰çº§
    è“ä¼š = 6,      // è“ä¼šç­‰çº§
    ç´«ä¼š = 7,      // ç´«ä¼šç­‰çº§
    é»„ä¼š = 8       // é»„ä¼šç­‰çº§
}
```

### è®¢å•ç›¸å…³

```csharp
/// <summary>
/// è®¢å•çŠ¶æ€ï¼ˆè®¢å•å¤„ç†æµç¨‹ï¼‰
/// </summary>
public enum OrderStatus
{
    æœªçŸ¥ = -1,
    å¾…å¤„ç† = 0,     // è®¢å•è¿›æ¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰æŠ•é€’è¿›ç½‘ç›˜
    å¾…ç»“ç®— = 1,     // å·²æŠ•æ³¨ï¼Œç­‰å¾…å¼€å¥–ç»“ç®—
    å·²å®Œæˆ = 2,     // ç»“ç®—å®Œæˆ
    å·²å–æ¶ˆ = 3      // å·²å–æ¶ˆ
}

/// <summary>
/// è®¢å•ç±»å‹ï¼ˆå†³å®šç»“ç®—æ–¹å¼å’Œæ˜¯å¦è¿›ç›˜ï¼‰
/// </summary>
public enum OrderType
{
    å¾…å®š = 0,
    ç›˜å†… = 1,       // è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å†…
    ç›˜å¤– = 2,       // æ²¡è¿›ç›˜çš„ï¼Œå°±æ˜¯ç›˜å¤–
    æ‰˜ = 3          // å°±æ˜¯ä¸æ‰“è¿›ç›˜çš„
}
```

### æŠ•æ³¨è®°å½•ç›¸å…³

```csharp
/// <summary>
/// æŠ•æ³¨è®°å½•æ¥æº
/// </summary>
public enum BetRecordSource
{
    è®¢å• = 1,       // æ¥æºäºè®¢å•è¡¨ï¼Œä¼šæ›´æ–°è®¢å•çŠ¶æ€
    å‘½ä»¤ = 2        // æ¥æºäºæ‰‹åŠ¨å‘½ä»¤ï¼Œä¸æ›´æ–°è®¢å•çŠ¶æ€
}
```

---

## ğŸ¯ æ€»ç»“

### âœ… å·²ä¼˜åŒ–

1. **ç§»é™¤äº† `OrderStatus.ç›˜å¤–`** - é¿å…ä¸ `OrderType.ç›˜å¤–` æ··æ·†
2. **ç§»é™¤äº† `OrderType.æ™®ä¼š` å’Œ `OrderType.é»„ä¼š`** - è¿™äº›å±äºä¼šå‘˜ç­‰çº§ï¼Œå·²åœ¨ `MemberState` ä¸­å®šä¹‰
3. **å›å½’åŸå§‹è®¾è®¡** - ä¿æŒ F5BotV2 çš„æ¸…æ™°ç®€æ´

### âœ… æ¸…æ™°çš„èŒè´£åˆ’åˆ†

- **MemberState** - æè¿°ä¼šå‘˜ç­‰çº§å’ŒçŠ¶æ€ï¼ˆä»è”ç³»äººè§’åº¦ï¼‰
- **OrderStatus** - æè¿°è®¢å•å¤„ç†æµç¨‹ï¼ˆå¾…å¤„ç† â†’ å¾…ç»“ç®— â†’ å·²å®Œæˆï¼‰
- **OrderType** - æè¿°è®¢å•æŠ•æ³¨ç±»å‹ï¼ˆç›˜å†…/ç›˜å¤–/æ‰˜ï¼Œå†³å®šå¦‚ä½•ç»“ç®—ï¼‰
- **BetRecord.Success** - æè¿°æŠ•æ³¨æ“ä½œç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰

### âœ… æ— éœ€æ–°å¢æšä¸¾

`BetRecord` çš„ `bool? Success` å·²ç»è¶³å¤Ÿè¡¨è¾¾æŠ•æ³¨ç»“æœï¼Œæ— éœ€å¼•å…¥æ–°æšä¸¾ï¼

---

## ğŸ’¡ å®é™…ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æµç¨‹

```csharp
// 1. åˆ›å»ºè®¢å•ï¼ˆå¾®ä¿¡æ¶ˆæ¯è¿›æ¥ï¼‰
var order = new V2MemberOrder
{
    OrderStatus = OrderStatus.å¾…å¤„ç†,  // è¿˜æ²¡æŠ•æ³¨
    OrderType = OrderType.å¾…å®š          // ç±»å‹å¾…ç¡®å®š
};

// 2. å°ç›˜æ—¶æŠ•æ³¨
var betRecord = new BetRecord
{
    Source = BetRecordSource.è®¢å•,
    Success = null  // ç­‰å¾…è¿”å›
};

// 3. æŠ•æ³¨æˆåŠŸå
if (betRecord.Success == true)
{
    order.OrderStatus = OrderStatus.å¾…ç»“ç®—;  // ç­‰å¾…ç»“ç®—
    order.OrderType = OrderType.ç›˜å†…;        // è¿›ç›˜äº†
}
else
{
    order.OrderStatus = OrderStatus.å·²å®Œæˆ;  // ä¸ç”¨ç»“ç®—äº†
    order.OrderType = OrderType.ç›˜å¤–;        // æ²¡è¿›ç›˜
}

// 4. å¼€å¥–åç»“ç®—
if (order.OrderType == OrderType.ç›˜å†…)
{
    // è®¡ç®—ç›ˆäº
    order.OrderStatus = OrderStatus.å·²å®Œæˆ;
}
```

### ç»Ÿè®¡æŸ¥è¯¢

```csharp
// æŸ¥è¯¢æœªå®Œæˆçš„è®¢å•
var incomplete = orders.Where(o => 
    o.OrderStatus != OrderStatus.å·²å®Œæˆ && 
    o.OrderStatus != OrderStatus.å·²å–æ¶ˆ);

// æŸ¥è¯¢éœ€è¦ç»“ç®—çš„è®¢å•
var needSettle = orders.Where(o => 
    o.OrderStatus == OrderStatus.å¾…ç»“ç®— && 
    o.OrderType == OrderType.ç›˜å†…);

// æŸ¥è¯¢æ‰˜å•ï¼ˆä¸æ‰£é’±çš„ï¼‰
var tuoOrders = orders.Where(o => o.OrderType == OrderType.æ‰˜);
```

---

**ç°åœ¨æšä¸¾ä½“ç³»æ¸…æ™°äº†å—ï¼Ÿ** ğŸ˜Š

