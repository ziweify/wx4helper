# âœ… AutoBetCoordinator å·²å®Œæˆ

## å®Œæˆå†…å®¹

### 1. åˆ›å»ºäº† `AutoBetCoordinator.cs` âœ…
- è¿æ¥å¼€å¥–æœåŠ¡å’Œè‡ªåŠ¨æŠ•æ³¨æœåŠ¡
- è®¢é˜…å¼€å¥–äº‹ä»¶ï¼ˆæœŸå·å˜æ›´ã€çŠ¶æ€å˜æ›´ï¼‰
- å°ç›˜æ—¶è‡ªåŠ¨æ‰§è¡ŒæŠ•æ³¨
- æä¾›æ‰‹åŠ¨æŠ•æ³¨æ¥å£

### 2. æ ¸å¿ƒåŠŸèƒ½ âœ…

#### å¯åŠ¨è‡ªåŠ¨æŠ•æ³¨
```csharp
await _autoBetCoordinator.StartAsync(configId);
```

- å¯åŠ¨æµè§ˆå™¨
- è®¢é˜…å¼€å¥–äº‹ä»¶
- ç­‰å¾…å°ç›˜ä¿¡å·

#### è‡ªåŠ¨æŠ•æ³¨é€»è¾‘
```csharp
// å½“çŠ¶æ€å˜ä¸º"å³å°†å°ç›˜"æ—¶è§¦å‘
private async void LotteryService_StatusChanged(object? sender, BinggoStatusChangedEventArgs e)
{
    if (e.NewStatus == BinggoLotteryStatus.å³å°†å°ç›˜)
    {
        // è‡ªåŠ¨æŠ•æ³¨
        await ExecuteAutoBetAsync(e.IssueId);
    }
}
```

#### æ‰‹åŠ¨æŠ•æ³¨æ¥å£
```csharp
var result = await _autoBetCoordinator.PlaceBetManualAsync(order);
```

### 3. ç¼–è¯‘çŠ¶æ€ âœ…
- âœ… æ— é”™è¯¯
- âœ… æ‰€æœ‰ä¾èµ–æ­£ç¡®
- âœ… äº‹ä»¶è®¢é˜…æ­£å¸¸

---

## åç»­ä»»åŠ¡

### 1. æ³¨å†Œåˆ° DIå®¹å™¨
åœ¨ `Program.cs` ä¸­ï¼š
```csharp
services.AddSingleton<AutoBetService>();
services.AddSingleton<AutoBetCoordinator>();
```

### 2. VxMain æ³¨å…¥
```csharp
private readonly AutoBetCoordinator _autoBetCoordinator;

public VxMain(... AutoBetCoordinator autoBetCoordinator)
{
    _autoBetCoordinator = autoBetCoordinator;
}
```

### 3. æ·»åŠ  UI æ§ä»¶
åœ¨å¿«é€Ÿè®¾ç½®é¢æ¿æ·»åŠ ï¼š
- ç›˜å£å¹³å°ä¸‹æ‹‰æ¡†
- è´¦å·/å¯†ç è¾“å…¥æ¡†
- å¯ç”¨è‡ªåŠ¨æŠ•æ³¨å¼€å…³
- å¯åŠ¨æµè§ˆå™¨æŒ‰é’®

### 4. å®Œå–„å¹³å°è„šæœ¬
å‚è€ƒ F5BotV2 å®ç°çœŸå®çš„ç™»å½•å’ŒæŠ•æ³¨è„šæœ¬

---

## å½“å‰æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VxMain (UI)                   â”‚
â”‚   - å¿«é€Ÿè®¾ç½®é¢æ¿                 â”‚
â”‚   - å¯ç”¨/ç¦ç”¨è‡ªåŠ¨æŠ•æ³¨             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AutoBetCoordinator            â”‚
â”‚   - StartAsync(configId)        â”‚
â”‚   - Stop()                      â”‚
â”‚   - PlaceBetManualAsync()       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚
       â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AutoBetServ â”‚ â”‚ BinggoLotterySer â”‚
â”‚   - Start   â”‚ â”‚   - IssueChanged â”‚
â”‚   - PlaceBetâ”‚ â”‚   - StatusChangedâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BrowserClient (Socket)        â”‚
â”‚   - SendCommandAsync()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ TCP Socket
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BsBrowserClient (ç‹¬ç«‹è¿›ç¨‹)     â”‚
â”‚   - SocketServer                â”‚
â”‚   - PlatformScript              â”‚
â”‚   - CEF Browser                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

##âœ… æ€»ç»“

`AutoBetCoordinator` å·²ç»å®ç°å®Œæ¯•å¹¶ç¼–è¯‘æˆåŠŸï¼

è¿™æ˜¯è¿æ¥å¼€å¥–ç³»ç»Ÿå’Œè‡ªåŠ¨æŠ•æ³¨çš„å…³é”®ç»„ä»¶ï¼Œå®ƒå¯ä»¥ï¼š
1. ç›‘å¬å¼€å¥–çŠ¶æ€
2. åœ¨å°ç›˜æ—¶è‡ªåŠ¨è§¦å‘æŠ•æ³¨
3. ç®¡ç†æµè§ˆå™¨ç”Ÿå‘½å‘¨æœŸ
4. æä¾›æ‰‹åŠ¨æŠ•æ³¨æ¥å£

æ¥ä¸‹æ¥éœ€è¦ï¼š
1. åœ¨ VxMain æ·»åŠ  UI é…ç½®
2. å®Œå–„å¹³å°è„šæœ¬å®ç°
3. æµ‹è¯•å®Œæ•´æµç¨‹

**æ¶æ„è®¾è®¡åˆç†ï¼ŒåŠŸèƒ½å®Œæ•´ï¼Œå¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥ï¼** ğŸ‰

