# 测试平台命令返回说明

## ✅ 所有命令都返回成功的模拟数据

测试平台实现了以下命令，**所有命令都返回成功的模拟数据**，格式与真实平台（如通宝）完全一致。

---

## 📋 支持的命令

### 1. Login（登录）

#### 请求
```json
{
  "command": "Login",
  "data": {
    "username": "test",
    "password": "123456"
  }
}
```

#### 响应
```json
{
  "Success": true,
  "Message": "登录成功",
  "Data": null
}
```

#### 日志
```
🔐 [测试平台] 开始登录: test
✅ [测试平台] 登录成功！用户: test
💰 [测试平台] 模拟余额: 10000.00 元
```

---

### 2. 获取Cookie

#### 请求
```json
{
  "command": "获取Cookie"
}
```

#### 响应
```json
{
  "Success": true,
  "Message": "获取成功,共3个Cookie",
  "Data": {
    "url": "https://www.baidu.com/",
    "cookies": {
      "BAIDUID": "TEST_COOKIE_12345",
      "SESSIONID": "TEST_SESSION_67890",
      "TOKEN": "TEST_TOKEN_ABCDE"
    },
    "count": 3
  }
}
```

#### 日志
```
📤 [测试平台] 获取Cookie完成:共3个（模拟数据）
```

---

### 3. 获取余额

#### 请求
```json
{
  "command": "获取余额"
}
```

#### 响应
```json
{
  "Success": true,
  "Message": "余额: 10000.00",
  "Data": {
    "balance": 10000.00
  }
}
```

#### 日志
```
💰 [测试平台] 获取余额...
💰 [测试平台] 当前余额: 10000.00 元
```

**注意**: 余额会随投注自动扣除。

---

### 4. 投注（PlaceBet）

#### 请求
```json
{
  "command": "投注",
  "data": {
    "betRecordId": 19,
    "issueId": 115003576,
    "originalContent": "1234大10",
    "standardContent": "1大10,2大10,3大10,4大10",
    "totalAmount": 40.0
  }
}
```

#### 响应
```json
{
  "Success": true,
  "OrderId": "TEST1737187455_1",
  "Result": "{\"status\":true,\"BettingNumber\":\"TEST1737187455_1\",\"msg\":\"投注成功\",\"balance\":9960.00}",
  "ErrorMessage": null,
  "PostStartTime": "2026-01-18 17:30:00.000",
  "PostEndTime": "2026-01-18 17:30:00.300",
  "DurationMs": 300,
  "OrderNo": "TEST1737187455_1",
  "Data": null
}
```

#### Result字段详情（JSON字符串）
```json
{
  "status": true,
  "BettingNumber": "TEST1737187455_1",
  "msg": "投注成功",
  "balance": 9960.00
}
```

#### 日志
```
🎲 [测试平台] 开始投注: 期号115003576 共4项 40元
   - P1 大: 10元
   - P2 大: 10元
   - P3 大: 10元
   - P4 大: 10元
✅ [测试平台] 投注成功: TEST1737187455_1
💰 [测试平台] 剩余余额: 9960.00 元
```

---

## 🔍 与通宝平台格式对照

### 登录命令

| 字段 | 测试平台 | 通宝 | 说明 |
|------|---------|------|------|
| `Success` | `true` | `true` | 布尔值 ✅ |
| `Message` | `"登录成功"` | `"登录成功"` | 完全一致 ✅ |

### 获取Cookie命令

| 字段 | 测试平台 | 通宝 | 说明 |
|------|---------|------|------|
| `Success` | `true` | `true` | 布尔值 ✅ |
| `Data.url` | 模拟URL | 真实URL | 字符串 ✅ |
| `Data.cookies` | 模拟3个 | 真实Cookie | 字典 ✅ |
| `Data.count` | `3` | 实际数量 | 整数 ✅ |

### 投注命令（最重要）

| 字段 | 测试平台 | 通宝 | 说明 |
|------|---------|------|------|
| `Success` | `true` | `true` | 布尔值 ✅ |
| `OrderId` | `TEST{时间戳}_{计数}` | `TB{时间戳}` | 字符串 ✅ |
| `Result` | JSON字符串 | JSON字符串 | 完全一致 ✅ |
| `ErrorMessage` | `null` | `null` | 成功时为null ✅ |

**Result字段内容（JSON解析后）**：

| 字段 | 测试平台 | 通宝 | 说明 |
|------|---------|------|------|
| `status` | `true` | `true` | 小写 ✅ |
| `BettingNumber` | `TEST1737187455_1` | `TB1737187455` | 格式一致 ✅ |
| `msg` | `"投注成功"` | `"投注成功"` | 完全一致 ✅ |
| `balance` | `9960.00` | 实际余额 | 数字 ✅ |

---

## 🎯 完全一致的格式

测试平台的返回格式与通宝**完全一致**，包括：

1. ✅ **字段名称**：`status`, `BettingNumber`, `msg`, `balance`
2. ✅ **字段类型**：布尔、字符串、数字
3. ✅ **字段大小写**：`status`（小写），`BettingNumber`（驼峰）
4. ✅ **JSON结构**：嵌套结构完全相同

**唯一区别**：订单号前缀（`TEST` vs `TB`），便于识别测试数据。

---

## 🔒 余额管理

### 初始余额
- **10,000元**（模拟）

### 余额扣除
- 投注成功后，自动扣除投注金额
- 例如：投注40元后，余额变为9,960元

### 余额恢复
- **重启浏览器客户端**后，余额重置为10,000元
- 测试平台不保存历史数据

---

## 📝 使用示例

### 完整流程

```
1. Login（登录）
   → 返回：Success=true, Message="登录成功"
   
2. 获取Cookie
   → 返回：Success=true, 3个模拟Cookie
   
3. 获取余额
   → 返回：balance=10000.00
   
4. 投注(1234大10)
   → 返回：Success=true, OrderId="TEST1737187455_1"
   → 余额扣除：10000 - 40 = 9960
   
5. 获取余额
   → 返回：balance=9960.00
```

---

## ⚠️ 注意事项

### 1. 所有命令都返回成功

- ✅ 登录：永远成功
- ✅ 获取Cookie：永远成功
- ✅ 获取余额：永远成功
- ✅ 投注：只要余额足够就成功

### 2. 唯一的失败情况

**余额不足**：

```json
{
  "Success": false,
  "OrderId": "",
  "Result": "{\"status\":false,\"msg\":\"余额不足\"}",
  "ErrorMessage": "余额不足"
}
```

### 3. 日志前缀

所有日志都带 `[测试平台]` 前缀，便于识别：

```
🔐 [测试平台] 开始登录: test
✅ [测试平台] 登录成功！用户: test
💰 [测试平台] 模拟余额: 10000.00 元
```

---

## 🎉 总结

测试平台提供了**完整的模拟环境**：

1. ✅ **所有命令都返回成功** - 无需真实账号
2. ✅ **格式与通宝完全一致** - 代码无需特殊处理
3. ✅ **自动余额管理** - 扣除和重置都是自动的
4. ✅ **清晰的日志** - 前缀标识，便于调试
5. ✅ **模拟数据真实** - Cookie、订单号、余额都很真实

**完美的开发测试环境！** 🚀

---

## 📞 需要帮助？

如果遇到问题，请检查：

1. 是否选择了"测试平台"（不是云顶或其他平台）
2. 浏览器客户端日志是否有 `[测试平台]` 前缀
3. 投注返回是否包含 `TEST` 前缀的订单号

如果以上都正确，说明测试平台工作正常！✨
