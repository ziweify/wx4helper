# 微信助手工具栏图标维护规则

## ⚠️ 重要规则

**绝对不要修改与需求无关的 UI 设置，特别是工具栏图标相关的代码！**

## 📋 问题历史

微信助手工具栏图片多次消失，原因：
1. 图标创建方法存在但未被调用
2. 按钮的 `Image` 属性未在代码中设置
3. 工具栏高度和位置设置不正确

## 🔧 修复方案

### 1. 图标设置位置

图标必须在 `WechatPage.cs` 的 `InitializeUI()` 方法中设置，**不能**只在 Designer.cs 中设置。

**原因**：Designer.cs 是自动生成的，可能被 Visual Studio 设计器重新生成或清理，导致设置丢失。

### 2. 必须设置的属性

每个工具栏按钮必须设置以下属性：

```csharp
// 在 InitializeUI() 中设置
toolStripButton_XXX.Image = CreateXXXIcon();
toolStripButton_XXX.DisplayStyle = ToolStripItemDisplayStyle.ImageAndText;
toolStripButton_XXX.Size = new System.Drawing.Size(宽度, 47); // 高度固定为 47
```

### 3. 工具栏设置

```csharp
// 在 Designer.cs 中设置（如果被重置，需要重新设置）
toolStrip1.Size = new System.Drawing.Size(宽度, 50); // 高度固定为 50
toolStrip1.ImageScalingSize = new System.Drawing.Size(24, 24);
```

### 4. 布局调整

如果工具栏高度改变，必须调整 `splitContainerControl_Main` 的位置：

```csharp
// 在 Designer.cs 中
splitContainerControl_Main.Location = new System.Drawing.Point(0, 50); // 与工具栏高度一致
```

## 🚫 禁止操作

1. **不要**在修改其他文件时，意外修改 `WechatPage.Designer.cs` 中的工具栏相关设置
2. **不要**删除或注释掉 `InitializeUI()` 中的图标设置代码
3. **不要**修改图标创建方法（`CreateXXXIcon()`）的签名或返回值
4. **不要**在未确认的情况下，接受 Visual Studio 设计器的自动修改建议

## ✅ 检查清单

在提交代码前，必须确认：

- [ ] `WechatPage.cs` 的 `InitializeUI()` 方法中所有按钮都设置了 `Image` 属性
- [ ] 所有按钮都设置了 `DisplayStyle = ImageAndText`
- [ ] 工具栏高度设置为 50
- [ ] `splitContainerControl_Main.Location.Y` 与工具栏高度一致
- [ ] 图标创建方法（`CreateXXXIcon()`）都存在且未被修改

## 📝 当前图标列表

| 按钮 | 图标方法 | 大小 |
|------|---------|------|
| 连接 | `CreateConnectIcon()` | 60x47 |
| 日志 | `CreateLogIcon()` | 60x47 |
| 开奖结果 | `CreateLotteryIcon()` | 84x47 |
| 上下分管理 | `CreateCreditIcon()` | 96x47 |
| 清空数据 | `CreateClearIcon()` | 84x47 |
| 设置 | `CreateSettingsIcon()` | 60x47 |

## 🔍 问题排查

如果图标再次消失，检查：

1. `WechatPage.cs` 的 `InitializeUI()` 方法是否被修改
2. `WechatPage.Designer.cs` 中的工具栏设置是否被重置
3. 图标创建方法是否被删除或修改
4. 是否有其他代码覆盖了按钮的 `Image` 属性

## 📌 修复步骤

如果图标消失，按以下步骤修复：

1. 打开 `WechatPage.cs`
2. 检查 `InitializeUI()` 方法中是否有图标设置代码
3. 如果没有，参考上面的代码示例添加
4. 检查 `WechatPage.Designer.cs` 中的工具栏高度和位置设置
5. 重新编译并运行，确认图标显示正常

---

**最后更新**：2025-12-22  
**维护者**：开发团队  
**优先级**：高（影响用户体验）

