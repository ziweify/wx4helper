# 库功能文档维护规则

## 📚 核心原则

**任何对库功能的增删改操作，必须同步更新使用手册文档。**

## 📖 文档类型

### 1. 使用手册（必须维护）
**位置**: `Unit.la/使用手册.md`

这是**主文档**，包含完整的API参考和使用指南。

**更新时机**：
- ✅ 新增任何公开类、方法、属性
- ✅ 修改任何公开API的签名或行为
- ✅ 删除任何公开功能
- ✅ 修改配置结构或参数
- ✅ 添加新的库功能模块

**必须更新的章节**：
1. **目录** - 添加新章节链接
2. **API 文档** - 更新方法签名、参数、示例
3. **更新日志** - 记录版本变更
4. **示例代码** - 提供实际使用示例
5. **常见问题** - 根据实际问题补充

### 2. 功能完成报告（可选，但推荐）
**位置**: `Unit.la/[功能名称]-完成报告.md`

记录具体功能的实现细节、设计决策。

**创建时机**：
- 完成一个独立功能模块时
- 重构重要功能时
- 解决复杂技术问题时

### 3. 快速参考（可选）
**位置**: `Unit.la/[功能名称]-快速参考.md`

提供常用API的快速查询。

## 🔄 文档更新流程

### 步骤1：功能变更
```
增加/修改/删除 代码
    ↓
编译测试通过
    ↓
进入文档更新流程
```

### 步骤2：更新主文档
```
打开: Unit.la/使用手册.md
    ↓
定位到相关章节
    ↓
更新以下内容:
  - API 签名
  - 参数说明
  - 返回值说明
  - 使用示例
  - 注意事项
    ↓
更新"更新日志"章节
    ↓
增加版本号（如适用）
```

### 步骤3：创建/更新补充文档（可选）
```
创建功能完成报告
    ↓
更新快速参考
    ↓
添加示例脚本
```

### 步骤4：文档验证
```
检查格式是否正确
    ↓
检查链接是否有效
    ↓
检查示例代码是否能运行
    ↓
检查目录是否更新
```

## ✅ 文档更新检查清单

### 新增功能
- [ ] 在"库概述"中添加新组件说明
- [ ] 在相应章节添加详细API文档
- [ ] 提供至少2个使用示例
- [ ] 更新"更新日志"
- [ ] 更新目录（如需要新章节）
- [ ] 创建功能完成报告
- [ ] 更新快速参考文档

### 修改功能
- [ ] 更新相关API文档
- [ ] 标注版本变更（如不兼容旧版）
- [ ] 更新示例代码
- [ ] 更新"更新日志"
- [ ] 在"常见问题"中说明变更影响

### 删除功能
- [ ] 在文档中标记为"已废弃"
- [ ] 提供替代方案
- [ ] 更新"更新日志"
- [ ] 移除或注释相关示例

## 📝 文档格式规范

### 1. API 文档格式

```markdown
#### 方法名称
简短描述（一句话）。

**语法**:
```语言
方法签名
```

**参数**:
- `参数1` (类型): 说明
- `参数2` (类型): 说明

**返回值**:
- (类型): 说明

**示例**:
```语言
实际使用示例
```

**注意事项**:
- 重要提示1
- 重要提示2
```

### 2. 更新日志格式

```markdown
### vX.Y.Z (YYYY-MM-DD)

#### 新增功能
- ✅ 功能1描述
- ✅ 功能2描述

#### 功能改进
- 🔧 改进1描述
- 🔧 改进2描述

#### Bug 修复
- 🐛 修复1描述
- 🐛 修复2描述

#### 破坏性变更
- ⚠️ 变更1描述（不兼容旧版）
```

## 🎯 具体示例

### 示例1：新增 Web 库方法

**代码变更**:
```csharp
// 新增方法
public void ClickAndWait(string selector, int waitMs = 1000)
{
    Click(selector);
    Wait(waitMs);
}
```

**文档更新**:
1. 打开 `Unit.la/使用手册.md`
2. 定位到 "5.4 DOM 元素操作"
3. 添加方法文档：

```markdown
#### web.ClickAndWait(selector, waitMs)
点击元素后等待指定时间。

**参数**:
- `selector` (string): CSS选择器
- `waitMs` (number): 等待毫秒数，默认1000

**示例**:
```lua
web.ClickAndWait("#submitBtn", 2000)  -- 点击后等待2秒
```
```

4. 更新"10. 更新日志"：
```markdown
### v1.0.1 (2026-01-23)

#### 新增功能
- ✅ web.ClickAndWait() - 点击元素后自动等待
```

### 示例2：修改现有方法签名

**代码变更**:
```csharp
// 旧版本
public void Navigate(string url)

// 新版本（添加了可选参数）
public void Navigate(string url, int timeoutMs = 30000)
```

**文档更新**:
1. 更新API文档，添加新参数说明
2. 更新示例代码
3. 在"更新日志"中说明变更
4. 如果不兼容，在"常见问题"中添加迁移指南

## 🚨 重要提示

### 文档与代码必须同步

```
代码变更 → 文档更新 → 提交
```

**禁止**：
- ❌ 只修改代码不更新文档
- ❌ 文档与代码不一致
- ❌ 示例代码无法运行
- ❌ 遗漏版本更新日志

**必须**：
- ✅ 代码和文档同时更新
- ✅ 示例代码经过测试
- ✅ 破坏性变更要明确标注
- ✅ 提供迁移指南（如适用）

## 📊 文档质量标准

### 优秀文档的特征
1. **完整性** - 所有公开API都有文档
2. **准确性** - 文档与代码完全一致
3. **清晰性** - 说明简洁明了
4. **示例性** - 提供实际可运行的示例
5. **时效性** - 随代码同步更新

### 文档审查要点
- [ ] API 签名准确
- [ ] 参数类型正确
- [ ] 示例代码可运行
- [ ] 返回值说明清晰
- [ ] 错误处理有说明
- [ ] 版本信息已更新

## 🔗 相关规则

请同时遵守以下工作规则：
- [代码实现原则](../AI工作规则/代码实现原则.md)
- [项目说明文件命名规则](../AI工作规则/项目说明文件命名规则.md)
- [UI界面设计器优先规则](../AI工作规则/UI界面设计器优先规则.md)

---

**记住**：文档是代码的一部分，保持文档最新是每个开发者的责任！
