# 项目重命名完整指南：永利系统 -> YongLiSystem

## 🎯 目标

将项目从中文名称"永利系统"重命名为英文名称"YongLiSystem"，彻底解决中文路径问题。

## 📋 执行步骤

### 步骤1：在文件资源管理器中重命名文件夹

1. 打开文件资源管理器
2. 导航到 `E:\gitcode\wx4helper\`
3. 将文件夹 `永利系统` 重命名为 `YongLiSystem`

### 步骤2：重命名项目文件

在 `YongLiSystem` 文件夹中：
- 将 `永利系统.csproj` 重命名为 `YongLiSystem.csproj`
- 将 `永利系统.csproj.user` 重命名为 `YongLiSystem.csproj.user`（如果存在）

### 步骤3：使用 Git 记录重命名（保持历史）

在 Git Bash 或 PowerShell 中执行：

```bash
# 进入项目根目录
cd E:\gitcode\wx4helper

# 使用 git mv 记录文件夹重命名（保持历史）
git mv "永利系统" "YongLiSystem"

# 进入新文件夹
cd YongLiSystem

# 重命名项目文件
git mv "永利系统.csproj" "YongLiSystem.csproj"
git mv "永利系统.csproj.user" "YongLiSystem.csproj.user"

# 返回根目录
cd ..
```

**注意**：如果文件夹已经在文件资源管理器中重命名，需要先恢复：
```bash
# 恢复文件夹名称
git checkout HEAD -- "永利系统"

# 然后使用 git mv
git mv "永利系统" "YongLiSystem"
```

### 步骤4：更新解决方案文件

解决方案文件 `Vx3Plus.sln` 已经更新，包含：
- 项目名称：`"YongLiSystem"`
- 项目路径：`YongLiSystem\YongLiSystem.csproj`

### 步骤5：批量更新代码中的命名空间

#### 方法A：使用 Visual Studio 查找替换（推荐）

1. 打开 Visual Studio
2. 按 `Ctrl+Shift+H` 打开"查找和替换"对话框
3. 选择"在文件中查找"
4. 设置：
   - **查找范围**：整个解决方案
   - **查找内容**：`namespace 永利系统`
   - **替换为**：`namespace YongLiSystem`
   - **文件类型**：`*.cs`
5. 点击"全部替换"
6. 重复以下替换：
   - `using 永利系统` -> `using YongLiSystem`
   - `using 永利系统.` -> `using YongLiSystem.`

#### 方法B：使用 PowerShell 脚本

执行以下 PowerShell 脚本（在项目根目录）：

```powershell
# 批量替换命名空间
$projectPath = "YongLiSystem"
$oldNamespace = "永利系统"
$newNamespace = "YongLiSystem"

# 获取所有 .cs 文件
$csFiles = Get-ChildItem -Path $projectPath -Filter "*.cs" -Recurse -File

foreach ($file in $csFiles) {
    $content = Get-Content $file.FullName -Raw -Encoding UTF8
    $content = $content -replace "namespace $oldNamespace", "namespace $newNamespace"
    $content = $content -replace "using $oldNamespace", "using $newNamespace"
    Set-Content -Path $file.FullName -Value $content -Encoding UTF8 -NoNewline
    Write-Host "已更新: $($file.Name)"
}
```

### 步骤6：更新编译脚本

更新 `YongLiSystem/编译脚本.ps1` 中的项目路径引用。

### 步骤7：验证和测试

1. **打开解决方案**：在 Visual Studio 中打开 `Vx3Plus.sln`
2. **检查项目引用**：确保 `YongLiSystem` 项目正确加载
3. **编译测试**：尝试编译项目，确保没有错误
4. **检查命名空间**：随机检查几个文件，确保命名空间已更新

### 步骤8：提交更改

```bash
# 查看更改
git status

# 添加所有更改
git add .

# 提交
git commit -m "重命名项目: 永利系统 -> YongLiSystem

- 重命名项目文件夹和文件
- 更新所有代码中的命名空间
- 更新解决方案文件引用
- 解决中文路径问题"
```

## ✅ 验证清单

重命名完成后，请验证：

- [ ] 文件夹已重命名为 `YongLiSystem`
- [ ] 项目文件已重命名为 `YongLiSystem.csproj`
- [ ] 解决方案文件中的引用已更新
- [ ] 所有 `.cs` 文件中的命名空间已更新为 `YongLiSystem`
- [ ] 所有 `using` 语句已更新
- [ ] 项目可以正常编译
- [ ] Git 历史记录已正确保留（使用 `git log --follow` 检查）

## 🔍 需要检查的文件

### 代码文件
- 所有 `.cs` 文件中的 `namespace` 声明
- 所有 `.cs` 文件中的 `using` 语句

### 配置文件
- `YongLiSystem.csproj` - 项目文件
- `Vx3Plus.sln` - 解决方案文件（已更新）
- `编译脚本.ps1` - 编译脚本

### 文档文件（可选）
- `README.md`
- `项目说明/*.md` 文件中的项目名称引用

## ⚠️ 注意事项

1. **备份**：在执行重命名前，建议先提交当前更改
2. **Git 历史**：使用 `git mv` 而不是直接重命名，可以保留文件历史记录
3. **编译测试**：重命名后务必测试编译，确保所有引用正确
4. **路径引用**：检查是否有硬编码的项目路径需要更新

## 🐛 常见问题

### Q: Git mv 失败，提示找不到文件
A: 如果文件夹已经在文件资源管理器中重命名，需要先恢复：
```bash
git checkout HEAD -- "永利系统"
git mv "永利系统" "YongLiSystem"
```

### Q: 编译时提示找不到命名空间
A: 检查是否所有文件中的命名空间都已更新，使用 Visual Studio 的"查找和替换"功能批量替换。

### Q: 解决方案中项目显示为"不可用"
A: 检查解决方案文件中的项目路径是否正确，确保项目文件已重命名。

## 📝 后续工作

重命名完成后，可能需要：

1. 更新 CI/CD 配置（如果有）
2. 更新其他项目中的项目引用（如果有）
3. 清理旧的编译输出目录（`bin/`, `obj/`）
